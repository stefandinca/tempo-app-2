(()=>{var e={};e.id=582,e.ids=[582],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},37972:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=r(50482),s=r(69108),l=r(62563),n=r.n(l),i=r(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["(dashboard)",{children:["clients",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33262)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\clients\\profile\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,31959)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,40777)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\clients\\profile\\page.tsx"],x="/(dashboard)/clients/profile/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(dashboard)/clients/profile/page",pathname:"/clients/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},14543:(e,t,r)=>{Promise.resolve().then(r.bind(r,9255))},79355:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},12704:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},71206:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},40626:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},46327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},38271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9255:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Q});var a=r(95344),s=r(3729),l=r(8428),n=r(87097),i=r(81012),d=r(69224);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=r(79355),x=r(46327),m=r(1560),u=r(38271),h=r(56506),p=r(56815),b=r(86671),g=r(94061);let f=[{id:"overview",label:"Overview"},{id:"evolution",label:"Evolution"},{id:"programs",label:"Programs"},{id:"plan",label:"Plan"},{id:"docs",label:"Docs"},{id:"reports",label:"Reports"}];function j({client:e,activeTab:t,onTabChange:r,onEdit:d}){let{userRole:j}=(0,b.useAuth)(),{success:v,error:y}=(0,g.useToast)(),N=(0,l.useRouter)(),[k,w]=(0,s.useState)(!1),C=(0,s.useRef)(null),P="Admin"===j,D=P||"Coordinator"===j;(0,s.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let Z=async()=>{try{let t=(0,n.JU)(i.db,"clients",e.id);await (0,n.r7)(t,{isArchived:!e.isArchived}),v(e.isArchived?"Client restored":"Client archived"),w(!1)}catch(e){console.error(e),y("Failed to update status")}},I=async()=>{if(confirm(`Are you sure you want to PERMANENTLY delete ${e.name}? This cannot be undone.`))try{await (0,n.oe)((0,n.JU)(i.db,"clients",e.id)),v("Client deleted forever"),N.push("/clients/")}catch(e){console.error(e),y("Failed to delete client")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(h.default,{href:"/clients/",className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:a.jsx(o,{className:"w-5 h-5 text-neutral-500"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:e.name}),e.isArchived&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-400 text-[10px] font-bold uppercase rounded-md flex items-center gap-1",children:[a.jsx(c.Z,{className:"w-3 h-3"}),"Archived"]})]})]}),D&&(0,a.jsxs)("div",{className:"flex items-center gap-2 relative",ref:C,children:[(0,a.jsxs)("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 border border-neutral-200 dark:border-neutral-800 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors text-sm font-medium",children:[a.jsx(x.Z,{className:"w-4 h-4"}),"Edit Profile"]}),a.jsx("button",{onClick:()=>w(!k),className:(0,p.W)("p-2 rounded-lg border border-neutral-200 dark:border-neutral-800 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",k&&"bg-neutral-100 dark:bg-neutral-800"),children:a.jsx(m.Z,{className:"w-5 h-5 text-neutral-500"})}),k&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:(0,a.jsxs)("div",{className:"p-1",children:[(0,a.jsxs)("button",{onClick:Z,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-50 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:[a.jsx(c.Z,{className:"w-4 h-4"}),e.isArchived?"Restore Client":"Archive Client"]}),P&&(0,a.jsxs)("button",{onClick:I,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 rounded-lg transition-colors",children:[a.jsx(u.Z,{className:"w-4 h-4"}),"Delete Permanently"]})]})})]})]}),a.jsx("div",{className:"flex items-center gap-1 border-b border-neutral-200 dark:border-neutral-800 overflow-x-auto scrollbar-hide",children:f.map(e=>(0,a.jsxs)("button",{onClick:()=>r(e.id),className:(0,p.W)("px-6 py-3 text-sm font-medium transition-all relative whitespace-nowrap",t===e.id?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:[e.label,t===e.id&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]},e.id))})]})}var v=r(18822),y=r(40626),N=r(71206);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,d.Z)("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]),w=(0,d.Z)("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),C=(0,d.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var P=r(62312);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,d.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var Z=r(33733),I=r(55794),S=r(42739),M=r(25545);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let T=(0,d.Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var A=r(76299);function q({client:e}){let{data:t}=(0,A.lU)(),{data:r,loading:l}=(0,A.we)(e.id),{success:d,error:o}=(0,g.useToast)(),[c,x]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!1),h=(t||[]).find(t=>t.id===e.assignedTherapistId),b=e=>new Date(e?e.seconds?1e3*e.seconds:e:0),f=r?.length||0,j=r?.filter(e=>"completed"===e.status)||[],q=j.filter(e=>"present"===e.attendance).length,E=j.length>0?Math.round(q/j.length*100):0,_=e.programIds?.length||0,L=new Date,O=(r||[]).filter(e=>b(e.startTime)>=L).sort((e,t)=>b(e.startTime).getTime()-b(t.startTime).getTime()).slice(0,3),U=async()=>{x(!0);try{let t=e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),r=`${t}-${Math.floor(1e3+9e3*Math.random())}`;await (0,n.r7)((0,n.JU)(i.db,"clients",e.id),{clientCode:r}),d("New access code generated!")}catch(e){console.error(e),o("Failed to generate code")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[a.jsx("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold",children:"Parent / Guardian"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-neutral-700 dark:text-neutral-300",children:[a.jsx(v.Z,{className:"w-4 h-4 text-neutral-400"}),a.jsx("span",{className:"font-medium",children:e.parentName||"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold",children:"Phone Number"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-neutral-700 dark:text-neutral-300",children:[a.jsx(y.Z,{className:"w-4 h-4 text-neutral-400"}),e.phone?a.jsx("a",{href:`tel:${e.phone}`,className:"font-medium hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e.phone}):a.jsx("span",{className:"font-medium",children:"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold",children:"Email Address"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-neutral-700 dark:text-neutral-300",children:[a.jsx(N.Z,{className:"w-4 h-4 text-neutral-400"}),a.jsx("span",{className:"font-medium",children:e.parentEmail||"Not provided"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide font-semibold",children:"Birth Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-neutral-700 dark:text-neutral-300",children:[a.jsx(k,{className:"w-4 h-4 text-neutral-400"}),a.jsx("span",{className:"font-medium",children:e.birthDate?new Date(e.birthDate).toLocaleDateString("ro-RO",{day:"2-digit",month:"long",year:"numeric"}):"Not provided"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(w,{className:"w-5 h-5 text-warning-500"}),"Medical Information & Notes"]}),a.jsx("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl border border-neutral-100 dark:border-neutral-800",children:(0,a.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 leading-relaxed italic",children:["“",e.medicalInfo||"No medical alerts or clinical notes provided for this client.","”"]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[a.jsx("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4",children:"Assigned Therapy Team"}),h?(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 border border-neutral-100 dark:border-neutral-800 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors w-fit pr-8",children:[a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:h.color},children:h.initials}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-neutral-900 dark:text-white",children:h.name}),a.jsx("p",{className:"text-sm text-primary-600 dark:text-primary-400 font-medium",children:h.role})]})]}):a.jsx("p",{className:"text-sm text-neutral-500 italic",children:"No therapist assigned yet."})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:a.jsx(C,{className:"w-20 h-24"})}),(0,a.jsxs)("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(C,{className:"w-5 h-5 text-primary-500"}),"Portal Access"]}),e.clientCode?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800 rounded-xl border border-neutral-100 dark:border-neutral-800 text-center",children:[a.jsx("p",{className:"text-[10px] font-bold text-neutral-400 uppercase tracking-widest mb-1",children:"Current Access Code"}),a.jsx("p",{className:"text-2xl font-mono font-bold text-primary-600 tracking-wider uppercase",children:e.clientCode})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{if(!e.clientCode)return;let t=`${"".includes("localhost")?"/parent":"/v2/parent"}/?code=${e.clientCode}`;navigator.clipboard.writeText(t),u(!0),d("Invite link copied to clipboard!"),setTimeout(()=>u(!1),2e3)},className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 rounded-xl text-sm font-bold hover:opacity-90 transition-all",children:[m?a.jsx(P.Z,{className:"w-4 h-4"}):a.jsx(D,{className:"w-4 h-4"}),m?"Copied!":"Copy Invite Link"]}),a.jsx("button",{onClick:U,disabled:c,className:"p-2.5 border border-neutral-200 dark:border-neutral-800 rounded-xl text-neutral-500 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-all disabled:opacity-50",title:"Reset Code",children:a.jsx(Z.Z,{className:(0,p.W)("w-5 h-5",c&&"animate-spin")})})]}),a.jsx("p",{className:"text-[10px] text-neutral-500 text-center leading-relaxed",children:"Parents can access the portal using this code or by clicking the unique invite link."})]}):a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"py-4 text-center",children:[a.jsx("p",{className:"text-sm text-neutral-500 mb-4",children:"Portal access is not yet configured for this client."}),(0,a.jsxs)("button",{onClick:U,disabled:c,className:"w-full flex items-center justify-center gap-2 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-primary-500/20 disabled:opacity-70",children:[c?a.jsx(Z.Z,{className:"w-5 h-5 animate-spin"}):a.jsx(C,{className:"w-5 h-5"}),"Generate Access Code"]})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[a.jsx("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4",children:"Quick Stats"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[a.jsx(I.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Total Sessions"})]}),a.jsx("span",{className:"font-bold text-neutral-900 dark:text-white",children:l?a.jsx(S.Z,{className:"w-3 h-3 animate-spin"}):f})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[a.jsx(M.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Attendance Rate"})]}),a.jsx("span",{className:(0,p.W)("font-bold",E>=90?"text-success-600":E>=75?"text-warning-600":"text-error-600"),children:l?a.jsx(S.Z,{className:"w-3 h-3 animate-spin"}):`${E}%`})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[a.jsx(T,{className:"w-4 h-4"}),a.jsx("span",{children:"Active Programs"})]}),a.jsx("span",{className:"font-bold text-primary-600",children:_})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[a.jsx("h3",{className:"font-bold text-neutral-900 dark:text-white mb-4",children:"Upcoming Schedule"}),l?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(S.Z,{className:"w-6 h-6 animate-spin text-neutral-300"})}):O.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[O.map(e=>{let t=b(e.startTime),r=t.toDateString()===new Date().toDateString();return(0,a.jsxs)("div",{className:"p-3 bg-primary-50 dark:bg-primary-900/20 rounded-xl border border-primary-100 dark:border-primary-900/50",children:[a.jsx("p",{className:"text-xs font-bold text-primary-600 dark:text-primary-400 uppercase",children:r?"Today":t.toLocaleDateString("en-US",{weekday:"long"})}),a.jsx("p",{className:"text-sm font-bold text-neutral-900 dark:text-white mt-1",children:e.type}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:[t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",e.duration," min"]})]},e.id)}),a.jsx("button",{className:"w-full py-2 text-sm font-bold text-primary-600 dark:text-primary-400 hover:underline",children:"View full calendar"})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-sm text-neutral-500 italic",children:"No upcoming sessions found."})})]})]})]})}var E=r(51838),_=r(63211);function L({client:e}){let{data:t,loading:r}=(0,A.b$)(),s=(t||[]).filter(t=>e.programIds?.includes(t.id));return r?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-500",children:[a.jsx(S.Z,{className:"w-10 h-10 animate-spin mb-4"}),a.jsx("p",{children:"Loading programs..."})]}):(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Assigned Programs"}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-xl text-sm font-bold transition-colors",children:[a.jsx(E.Z,{className:"w-4 h-4"}),"Assign Program"]})]}),s.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>a.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm hover:border-primary-500/50 transition-all group",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-50 dark:bg-primary-900/20 rounded-xl flex items-center justify-center text-primary-600 group-hover:bg-primary-100 dark:group-hover:bg-primary-900/40 transition-colors",children:a.jsx(_.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-neutral-900 dark:text-white",children:e.title}),a.jsx("p",{className:"text-sm text-neutral-500 mt-1 line-clamp-2",children:e.description||"No description provided for this program."}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 rounded-lg",children:"Status: Active"}),a.jsx("button",{className:"text-sm font-bold text-primary-600 hover:underline",children:"View Details"})]})]})]})},e.id))}):(0,a.jsxs)("div",{className:"py-20 text-center bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800",children:[a.jsx("div",{className:"w-16 h-16 bg-neutral-50 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(_.Z,{className:"w-8 h-8 text-neutral-300"})}),a.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"No programs assigned"}),a.jsx("p",{className:"text-neutral-500 mt-1 max-w-sm mx-auto",children:"This client doesn't have any therapy programs assigned yet. Click the button above to start assigning programs."})]})]})}var O=r(17910);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let U=(0,d.Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var R=r(12704),z=r(25390),$=r(7060),F=r(14513),W=r(28765);function J({isOpen:e,onClose:t,clientId:r,existingPlan:l}){let{success:d,error:o}=(0,g.useToast)(),{data:c,loading:x}=(0,A.b$)(),[m,h]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),[j,v]=(0,s.useState)(""),[y,N]=(0,s.useState)({name:"",startDate:"",endDate:"",programIds:[],status:"active"});(0,s.useEffect)(()=>{if(l)N({name:l.name,startDate:l.startDate,endDate:l.endDate,programIds:l.programIds,status:l.status});else{let e=new Date,t=new Date;t.setMonth(t.getMonth()+3),N({name:"",startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0],programIds:[],status:"active"})}v("")},[l,e]);let k=(c||[]).filter(e=>e.title.toLowerCase().includes(j.toLowerCase())||(e.description||"").toLowerCase().includes(j.toLowerCase())),w=e=>{N(t=>({...t,programIds:t.programIds.includes(e)?t.programIds.filter(t=>t!==e):[...t.programIds,e]}))},C=()=>y.name.trim()?y.startDate?y.endDate?new Date(y.endDate)<=new Date(y.startDate)?"End date must be after start date":0===y.programIds.length?"Select at least one program":null:"End date is required":"Start date is required":"Plan name is required",D=async e=>{e.preventDefault();let a=C();if(a){o(a);return}h(!0);try{let e={name:y.name.trim(),startDate:y.startDate,endDate:y.endDate,programIds:y.programIds,status:y.status,...l?{}:{createdAt:new Date().toISOString()}};if(l){let t=(0,n.JU)(i.db,"clients",r,"interventionPlans",l.id);await (0,n.r7)(t,e),d("Plan updated successfully")}else await (0,n.ET)((0,n.hJ)(i.db,"clients",r,"interventionPlans"),e),d("Plan created successfully");t()}catch(e){console.error(e),o(l?"Failed to update plan":"Failed to create plan")}finally{h(!1)}},Z=async()=>{if(l&&confirm(`Delete "${l.name}"? This action cannot be undone.`)){f(!0);try{await (0,n.oe)((0,n.JU)(i.db,"clients",r,"interventionPlans",l.id)),d("Plan deleted"),t()}catch(e){console.error(e),o("Failed to delete plan")}finally{f(!1)}}};return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between bg-neutral-50 dark:bg-neutral-900",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 text-primary-600 rounded-xl flex items-center justify-center",children:a.jsx(O.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:l?"Edit Intervention Plan":"Create Intervention Plan"}),a.jsx("p",{className:"text-xs text-neutral-500",children:l?"Modify plan details":"Set up programs for this client"})]})]}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-800",children:a.jsx(F.Z,{className:"w-5 h-5 text-neutral-500"})})]}),(0,a.jsxs)("form",{onSubmit:D,className:"flex-1 overflow-y-auto p-6 space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Plan Name ",a.jsx("span",{className:"text-error-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,placeholder:"e.g. Q1 2026 Intervention",className:"w-full px-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500",value:y.name,onChange:e=>N({...y,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Start Date ",a.jsx("span",{className:"text-error-500",children:"*"})]}),a.jsx("input",{type:"date",required:!0,className:"w-full px-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500",value:y.startDate,onChange:e=>N({...y,startDate:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["End Date ",a.jsx("span",{className:"text-error-500",children:"*"})]}),a.jsx("input",{type:"date",required:!0,className:"w-full px-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500",value:y.endDate,onChange:e=>N({...y,endDate:e.target.value})})]})]}),l&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Status"}),a.jsx("div",{className:"flex gap-2",children:["active","draft","completed"].map(e=>a.jsx("button",{type:"button",onClick:()=>N({...y,status:e}),className:(0,p.W)("flex-1 py-2 rounded-lg text-sm font-medium transition-all border capitalize",y.status===e?"active"===e?"bg-success-500 border-success-600 text-white":"draft"===e?"bg-warning-500 border-warning-600 text-white":"bg-neutral-500 border-neutral-600 text-white":"bg-white dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Select Programs ",a.jsx("span",{className:"text-error-500",children:"*"}),(0,a.jsxs)("span",{className:"ml-2 text-xs text-neutral-500 font-normal",children:["(",y.programIds.length," selected)"]})]}),(0,a.jsxs)("div",{className:"relative mb-3",children:[a.jsx(W.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),a.jsx("input",{type:"text",placeholder:"Search programs...",className:"w-full pl-9 pr-4 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 text-sm",value:j,onChange:e=>v(e.target.value)})]}),a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1.5 pr-1",children:x?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(S.Z,{className:"w-6 h-6 animate-spin text-primary-500"})}):0===k.length?a.jsx("p",{className:"text-center py-4 text-sm text-neutral-500",children:"No programs found"}):k.map(e=>{let t=y.programIds.includes(e.id);return(0,a.jsxs)("div",{onClick:()=>w(e.id),className:(0,p.W)("flex items-center gap-3 p-2.5 rounded-lg border cursor-pointer transition-all",t?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-700 hover:border-primary-300"),children:[a.jsx("div",{className:(0,p.W)("w-5 h-5 rounded border flex items-center justify-center flex-shrink-0",t?"bg-primary-500 border-primary-500 text-white":"border-neutral-300 dark:border-neutral-600"),children:t&&a.jsx(P.Z,{className:"w-3 h-3"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white truncate flex items-center gap-1.5",children:[a.jsx(_.Z,{className:"w-3 h-3 text-neutral-400 flex-shrink-0"}),e.title]}),e.description&&a.jsx("p",{className:"text-xs text-neutral-500 truncate",children:e.description})]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[l&&a.jsx("button",{type:"button",onClick:Z,disabled:b,className:"p-2.5 border border-error-200 dark:border-error-800 text-error-600 rounded-xl hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors disabled:opacity-50",children:b?a.jsx(S.Z,{className:"w-5 h-5 animate-spin"}):a.jsx(u.Z,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2.5 border border-neutral-200 dark:border-neutral-700 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 font-bold transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:m,className:"flex-1 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20",children:m?a.jsx(S.Z,{className:"w-4 h-4 animate-spin"}):l?"Save Changes":"Create Plan"})]})]})]})]}):null}function V({client:e}){let{data:t,loading:r,activePlan:l}=(0,A.Rn)(e.id),{data:d}=(0,A.b$)(),{success:o,error:c}=(0,g.useToast)(),[m,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[f,j]=(0,s.useState)(!1),v=t.filter(e=>"completed"===e.status),y=t.filter(e=>"draft"===e.status),N=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),k=e=>{let t=new Date(e),r=new Date;return Math.ceil((t.getTime()-r.getTime())/864e5)},w=async t=>{if(confirm(`End "${t.name}"? This will mark the plan as completed.`))try{let r=(0,n.JU)(i.db,"clients",e.id,"interventionPlans",t.id);await (0,n.r7)(r,{status:"completed"}),o("Plan marked as completed")}catch(e){console.error(e),c("Failed to update plan")}},C=async t=>{if(l&&l.id!==t.id){if(!confirm(`There's already an active plan. Activating this will end "${l.name}". Continue?`))return;let t=(0,n.JU)(i.db,"clients",e.id,"interventionPlans",l.id);await (0,n.r7)(t,{status:"completed"})}try{let r=(0,n.JU)(i.db,"clients",e.id,"interventionPlans",t.id);await (0,n.r7)(r,{status:"active"}),o("Plan activated")}catch(e){console.error(e),c("Failed to activate plan")}};return r?a.jsx("div",{className:"flex h-64 items-center justify-center",children:a.jsx(S.Z,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[l?a.jsx("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center",children:a.jsx(O.Z,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:l.name}),(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-success-100 dark:bg-success-900/30 text-success-700 dark:text-success-400 text-xs font-bold rounded-full flex items-center gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-success-500 rounded-full animate-pulse"}),"Active"]})]}),a.jsx("p",{className:"text-sm text-neutral-500 mt-0.5",children:"Intervention Plan"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:()=>b(l),className:"p-2 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:a.jsx(x.Z,{className:"w-4 h-4 text-neutral-500"})})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mb-6 p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(I.Z,{className:"w-4 h-4 text-neutral-400"}),(0,a.jsxs)("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[N(l.startDate)," → ",N(l.endDate)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(M.Z,{className:"w-4 h-4 text-neutral-400"}),a.jsx("span",{className:(0,p.W)("text-sm font-medium",7>=k(l.endDate)?"text-warning-600":"text-neutral-600 dark:text-neutral-400"),children:k(l.endDate)>0?`${k(l.endDate)} days remaining`:"Plan ended"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-3",children:["Programs (",l.programIds.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.programIds.map(e=>d.find(t=>t.id===e)?.title||e).filter(Boolean).map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 text-sm font-medium rounded-lg",children:[a.jsx(_.Z,{className:"w-3.5 h-3.5"}),e]},t))})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6 pt-6 border-t border-neutral-100 dark:border-neutral-800",children:[a.jsx("button",{onClick:()=>b(l),className:"flex-1 py-2.5 border border-neutral-200 dark:border-neutral-700 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 font-medium transition-colors text-sm",children:"Edit Plan"}),a.jsx("button",{onClick:()=>w(l),className:"flex-1 py-2.5 bg-neutral-900 dark:bg-white text-white dark:text-neutral-900 rounded-xl font-medium transition-colors text-sm hover:bg-neutral-800 dark:hover:bg-neutral-100",children:"End Plan"})]})]})}):(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-neutral-100 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(U,{className:"w-8 h-8 text-neutral-400"})}),a.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"No Active Intervention Plan"}),a.jsx("p",{className:"text-neutral-500 max-w-sm mx-auto mb-6",children:"Create a plan to automatically assign programs to this client's therapy sessions."}),(0,a.jsxs)("button",{onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-primary-500/20",children:[a.jsx(E.Z,{className:"w-4 h-4"}),"Create Intervention Plan"]})]}),y.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-neutral-500 uppercase tracking-wider",children:["Draft Plans (",y.length,")"]}),y.map(e=>a.jsx("div",{className:"bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-800 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-neutral-100 dark:bg-neutral-800 rounded-lg flex items-center justify-center",children:a.jsx(U,{className:"w-5 h-5 text-neutral-400"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-neutral-900 dark:text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:[N(e.startDate)," → ",N(e.endDate)," \xb7 ",e.programIds.length," programs"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>b(e),className:"px-3 py-1.5 text-xs font-medium text-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:"Edit"}),a.jsx("button",{onClick:()=>C(e),className:"px-3 py-1.5 text-xs font-medium bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Activate"})]})]})},e.id))]}),l&&(0,a.jsxs)("button",{onClick:()=>u(!0),className:"w-full py-3 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-xl text-neutral-500 hover:border-primary-300 hover:text-primary-600 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx(E.Z,{className:"w-4 h-4"}),"Create New Plan"]}),v.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>j(!f),className:"flex items-center gap-2 text-sm font-semibold text-neutral-500 uppercase tracking-wider hover:text-neutral-700 transition-colors",children:[(0,a.jsxs)("span",{children:["Plan History (",v.length,")"]}),f?a.jsx(R.Z,{className:"w-4 h-4"}):a.jsx(z.Z,{className:"w-4 h-4"})]}),f&&a.jsx("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-200",children:v.map(e=>a.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-xl p-4 border border-neutral-100 dark:border-neutral-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-neutral-200 dark:bg-neutral-700 rounded-lg flex items-center justify-center",children:a.jsx($.Z,{className:"w-4 h-4 text-neutral-400"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:[N(e.startDate)," → ",N(e.endDate)," \xb7 ",e.programIds.length," programs"]})]})]}),a.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:"Completed"})]})},e.id))})]}),a.jsx(J,{isOpen:m||!!h,onClose:()=>{u(!1),b(null)},clientId:e.id,existingPlan:h})]})}/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let H=(0,d.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function G({isOpen:e,onClose:t,client:r}){let{success:l,error:d}=(0,g.useToast)(),{data:o}=(0,A.lU)(),[c,x]=(0,s.useState)(!1),[m,u]=(0,s.useState)({name:"",birthDate:"",phone:"",parentName:"",parentEmail:"",medicalInfo:"",assignedTherapistId:""});(0,s.useEffect)(()=>{r&&e&&u({name:r.name||"",birthDate:r.birthDate||"",phone:r.phone||"",parentName:r.parentName||"",parentEmail:r.parentEmail||"",medicalInfo:r.medicalInfo||"",assignedTherapistId:r.assignedTherapistId||""})},[r,e]);let h=async e=>{e.preventDefault(),x(!0);try{let e=(0,n.JU)(i.db,"clients",r.id),a={name:m.name,birthDate:m.birthDate||null,phone:m.phone,parentName:m.parentName,parentEmail:m.parentEmail,medicalInfo:m.medicalInfo,assignedTherapistId:m.assignedTherapistId};await (0,n.r7)(e,a),l("Profile updated successfully"),t()}catch(e){console.error(e),d("Failed to update profile")}finally{x(!1)}};return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between bg-neutral-50 dark:bg-neutral-900",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 text-primary-600 rounded-xl flex items-center justify-center",children:a.jsx(H,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Edit Profile"}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:["Update information for ",r?.name]})]})]}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-800",children:a.jsx(F.Z,{className:"w-5 h-5 text-neutral-500"})})]}),(0,a.jsxs)("form",{onSubmit:h,className:"flex-1 overflow-y-auto p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Child Name"}),a.jsx("input",{type:"text",required:!0,placeholder:"e.g. John Doe",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.name,onChange:e=>u({...m,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Birth Date"}),a.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.birthDate,onChange:e=>u({...m,birthDate:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Phone Number ",a.jsx("span",{className:"text-neutral-400 font-normal",children:"(optional)"})]}),a.jsx("input",{type:"tel",placeholder:"e.g. 0721 234 567",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.phone,onChange:e=>u({...m,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Parent Name ",a.jsx("span",{className:"text-neutral-400 font-normal",children:"(optional)"})]}),a.jsx("input",{type:"text",placeholder:"e.g. Robert Doe",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.parentName,onChange:e=>u({...m,parentName:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:["Parent Email ",a.jsx("span",{className:"text-neutral-400 font-normal",children:"(optional)"})]}),a.jsx("input",{type:"email",placeholder:"parent@example.com",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.parentEmail,onChange:e=>u({...m,parentEmail:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Assigned Therapist"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 transition-colors",value:m.assignedTherapistId,onChange:e=>u({...m,assignedTherapistId:e.target.value}),children:[a.jsx("option",{value:"",children:"Select a therapist..."}),o.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.role,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Medical Info / Notes"}),a.jsx("textarea",{rows:3,placeholder:"Allergies, specific diagnosis notes...",className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-800 border-transparent rounded-lg focus:ring-2 focus:ring-primary-500 resize-none transition-colors",value:m.medicalInfo,onChange:e=>u({...m,medicalInfo:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2.5 border border-neutral-200 dark:border-neutral-700 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 font-bold transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:c,className:"flex-1 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-primary-500/20",children:c?a.jsx(S.Z,{className:"w-4 h-4 animate-spin"}):"Save Changes"})]})]})]})]}):null}var K=r(66138);function B(){let e=(0,l.useSearchParams)().get("id"),{data:t,loading:r,error:d}=function(e){let[t,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!e)return;l(!0);let t=(0,n.cf)((0,n.JU)(i.db,"clients",e),e=>{e.exists()?r({id:e.id,...e.data()}):o("Client not found"),l(!1)},e=>{console.error("Error fetching client:",e),o(e.message),l(!1)});return()=>t()},[e]),{data:t,loading:a,error:d}}(e||""),[o,c]=(0,s.useState)("overview"),[x,m]=(0,s.useState)(!1);return e?r?a.jsx("div",{className:"flex h-screen items-center justify-center",children:a.jsx(S.Z,{className:"w-10 h-10 animate-spin text-primary-500"})}):d||!t?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[80vh] text-center p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-error-50 dark:bg-error-900/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(K.Z,{className:"w-8 h-8 text-error-500"})}),a.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Client not found"}),a.jsx("p",{className:"text-neutral-500 mt-2",children:"The client you are looking for doesn't exist or has been removed."}),a.jsx("a",{href:"/clients",className:"mt-6 px-6 py-2 bg-primary-600 text-white rounded-xl font-bold hover:bg-primary-700 transition-colors",children:"Back to Client List"})]}):(0,a.jsxs)("div",{className:"flex-1 p-6 space-y-8 max-w-7xl mx-auto w-full",children:[a.jsx(j,{client:t,activeTab:o,onTabChange:c,onEdit:()=>m(!0)}),(0,a.jsxs)("div",{className:"pt-2",children:["overview"===o&&a.jsx(q,{client:t}),"programs"===o&&a.jsx(L,{client:t}),"plan"===o&&a.jsx(V,{client:t}),!["overview","programs","plan"].includes(o)&&(0,a.jsxs)("div",{className:"py-20 text-center bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white capitalize",children:[o," Section"]}),a.jsx("p",{className:"text-neutral-500 mt-1",children:"This section is currently under development."})]})]}),a.jsx(G,{isOpen:x,onClose:()=>m(!1),client:t})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[80vh] text-center p-6",children:[a.jsx(K.Z,{className:"w-12 h-12 text-error-500 mb-4"}),a.jsx("h2",{className:"text-xl font-bold",children:"Invalid Request"}),a.jsx("p",{className:"text-neutral-500 mt-2",children:"No client ID provided."})]})}function Q(){return a.jsx(s.Suspense,{fallback:a.jsx("div",{className:"flex h-screen items-center justify-center",children:a.jsx(S.Z,{className:"w-10 h-10 animate-spin text-primary-500"})}),children:a.jsx(B,{})})}},33262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>n});let a=(0,r(86843).createProxy)(String.raw`C:\_WORK\_TEMPO\FINAL\_APP_v2\tempo-app-2\src\app\(dashboard)\clients\profile\page.tsx`),{__esModule:s,$$typeof:l}=a,n=a.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[960,506,605,557],()=>r(37972));module.exports=a})();