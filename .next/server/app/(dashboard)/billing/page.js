(()=>{var e={};e.id=921,e.ids=[921],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},22922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(50482),a=r(69108),n=r(62563),l=r.n(n),i=r(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["(dashboard)",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3194)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\billing\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,31959)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,40777)),"C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\_WORK\\_TEMPO\\FINAL\\_APP_v2\\tempo-app-2\\src\\app\\(dashboard)\\billing\\page.tsx"],x="/(dashboard)/billing/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},39171:(e,t,r)=>{Promise.resolve().then(r.bind(r,88081))},37121:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},46064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},88081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var s=r(95344),a=r(3729),n=r(37121),l=r(89895);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var d=r(56815),o=r(71532),c=r(97751),x=r(55794);function u({year:e,month:t,onChange:r}){return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>{0===t?r(e-1,11):r(e,t-1)},className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors","aria-label":"Previous month",children:s.jsx(o.Z,{className:"w-5 h-5 text-neutral-500"})}),s.jsx("div",{className:"px-4 py-2 min-w-[180px] text-center",children:s.jsx("span",{className:"font-bold text-neutral-900 dark:text-white",children:new Date(e,t,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),s.jsx("button",{onClick:()=>{11===t?r(e+1,0):r(e,t+1)},className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors","aria-label":"Next month",children:s.jsx(c.Z,{className:"w-5 h-5 text-neutral-500"})})]}),!(()=>{let r=new Date;return e===r.getFullYear()&&t===r.getMonth()})()&&(0,s.jsxs)("button",{onClick:()=>{let e=new Date;r(e.getFullYear(),e.getMonth())},className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",children:[s.jsx(x.Z,{className:"w-4 h-4"}),"Today"]})]})}var m=r(46064),p=r(25545),h=r(7060);function b({summary:e,loading:t}){let r=e=>new Intl.NumberFormat("ro-RO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e),a=[{label:"Total Revenue",value:e.totalRevenue,icon:m.Z,color:"primary",subtitle:"This month"},{label:"Pending",value:e.pendingAmount,count:e.pendingCount,icon:p.Z,color:"warning",subtitle:`${e.pendingCount} invoice${1!==e.pendingCount?"s":""}`},{label:"Collected",value:e.paidAmount,count:e.paidCount,icon:h.Z,color:"success",subtitle:`${e.paidCount} invoice${1!==e.paidCount?"s":""}`}],n={primary:{bg:"bg-primary-50 dark:bg-primary-900/20",text:"text-primary-600"},warning:{bg:"bg-warning-50 dark:bg-warning-900/20",text:"text-warning-600"},success:{bg:"bg-success-50 dark:bg-success-900/20",text:"text-success-600"}};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(e=>{let a=e.icon,l=n[e.color];return(0,s.jsxs)("div",{className:(0,d.W)("bg-white dark:bg-neutral-900 p-6 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",t&&"animate-pulse"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-neutral-500",children:e.label}),s.jsx("div",{className:(0,d.W)("p-2 rounded-lg",l.bg,l.text),children:s.jsx(a,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex items-baseline gap-2",children:t?s.jsx("div",{className:"h-9 w-32 bg-neutral-200 dark:bg-neutral-700 rounded"}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("h3",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:r(e.value)}),s.jsx("span",{className:"text-sm font-medium text-neutral-500",children:"RON"})]})}),s.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:e.subtitle})]},e.label)})})}var g=r(45961),j=r(42739),N=r(25390),y=r(1560);function v({invoices:e,loading:t,onMarkAsPaid:r,onMarkAsPending:l}){let[i,o]=(0,a.useState)(new Set),[x,u]=(0,a.useState)(null),m=e=>{let t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)},b=e=>new Intl.NumberFormat("ro-RO",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),v=e=>new Date(e).toLocaleDateString("ro-RO",{day:"2-digit",month:"short"}),f=e=>new Date(e).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}),k=e=>{switch(e){case"paid":return{icon:h.Z,label:"Paid",classes:"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400"};case"overdue":return{icon:g.Z,label:"Overdue",classes:"bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-400"};default:return{icon:p.Z,label:"Pending",classes:"bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-400"}}};return t?s.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-12 flex items-center justify-center",children:s.jsx(j.Z,{className:"w-8 h-8 animate-spin text-primary-500"})}):0===e.length?(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-12 text-center",children:[s.jsx(n.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"No billable sessions"}),s.jsx("p",{className:"text-neutral-500",children:"There are no completed sessions to bill for this period."})]}):s.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl overflow-hidden shadow-sm",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800/50 text-neutral-500 font-medium",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 w-8"}),s.jsx("th",{className:"px-6 py-3",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Sessions"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Hours"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-neutral-100 dark:divide-neutral-800",children:e.map(e=>{let t=i.has(e.clientId),a=k(e.status),o=a.icon;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{className:(0,d.W)("hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors cursor-pointer",t&&"bg-neutral-50 dark:bg-neutral-800/30"),onClick:()=>m(e.clientId),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{className:"p-1 rounded hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",children:t?s.jsx(N.Z,{className:"w-4 h-4 text-neutral-500"}):s.jsx(c.Z,{className:"w-4 h-4 text-neutral-500"})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-medium text-neutral-900 dark:text-white",children:e.clientName})}),s.jsx("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:e.sessions}),(0,s.jsxs)("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:[e.totalHours,"h"]}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right",children:[(0,s.jsxs)("span",{className:"font-bold text-neutral-900 dark:text-white",children:[b(e.total)," RON"]}),e.discount>0&&(0,s.jsxs)("span",{className:"block text-xs text-success-600",children:["-",b(e.discount)," discount"]})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:(0,s.jsxs)("span",{className:(0,d.W)("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold",a.classes),children:[s.jsx(o,{className:"w-3.5 h-3.5"}),a.label]})}),s.jsx("td",{className:"px-6 py-4 text-right",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"relative inline-block",children:[s.jsx("button",{onClick:()=>u(x===e.clientId?null:e.clientId),className:"p-2 rounded-lg text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:s.jsx(y.Z,{className:"w-4 h-4"})}),x===e.clientId&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl shadow-lg py-1 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:["paid"===e.status?(0,s.jsxs)("button",{onClick:()=>{l?.(e.clientId),u(null)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"Mark Pending"]}):(0,s.jsxs)("button",{onClick:()=>{r?.(e.clientId),u(null)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-success-600 hover:bg-success-50 dark:hover:bg-success-900/20 transition-colors",children:[s.jsx(h.Z,{className:"w-4 h-4"}),"Mark as Paid"]}),(0,s.jsxs)("button",{onClick:()=>u(null),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",children:[s.jsx(n.Z,{className:"w-4 h-4"}),"View Details"]})]})]})})]},e.clientId),t&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 bg-neutral-50 dark:bg-neutral-800/20",children:(0,s.jsxs)("div",{className:"pl-8 space-y-2",children:[s.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-3",children:"Session Breakdown"}),s.jsx("div",{className:"grid gap-2",children:e.lineItems.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 bg-white dark:bg-neutral-900 rounded-lg border border-neutral-100 dark:border-neutral-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm text-neutral-500 w-20",children:v(e.date)}),s.jsx("span",{className:"text-sm text-neutral-500 w-16",children:f(e.date)}),s.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:e.serviceLabel}),(0,s.jsxs)("span",{className:"text-xs text-neutral-400",children:["(",e.duration," min)"]})]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:[b(e.amount)," RON"]})]},t))}),e.discount>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 px-3 mt-2 border-t border-neutral-200 dark:border-neutral-700",children:[s.jsx("span",{className:"text-sm text-neutral-500",children:"Subtotal"}),(0,s.jsxs)("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[b(e.subtotal)," RON"]})]}),e.discount>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 px-3",children:[s.jsx("span",{className:"text-sm text-success-600",children:"Discount"}),(0,s.jsxs)("span",{className:"text-sm text-success-600",children:["-",b(e.discount)," RON"]})]})]})})},`${e.clientId}-details`)]})})})]})})})}var f=r(66138);function k({payouts:e,loading:t}){let r=e=>new Intl.NumberFormat("ro-RO",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),a=e.reduce((e,t)=>e+t.calculatedPayout,0),n=e.reduce((e,t)=>e+t.totalHours,0),i=e.reduce((e,t)=>e+t.sessions,0);if(t)return s.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-12 flex items-center justify-center",children:s.jsx(j.Z,{className:"w-8 h-8 animate-spin text-primary-500"})});if(0===e.length)return(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-12 text-center",children:[s.jsx(l.Z,{className:"w-12 h-12 text-neutral-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"No sessions recorded"}),s.jsx("p",{className:"text-neutral-500",children:"There are no sessions to calculate payouts for this period."})]});let o=e.some(e=>0===e.hourlyRate);return(0,s.jsxs)("div",{className:"space-y-4",children:[o&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-xl",children:[s.jsx(f.Z,{className:"w-5 h-5 text-warning-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-warning-800 dark:text-warning-200",children:"Missing hourly rates"}),s.jsx("p",{className:"text-xs text-warning-600 dark:text-warning-400 mt-0.5",children:"Some team members don't have hourly rates set. Update their profiles in the Team section."})]})]}),s.jsx("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl overflow-hidden shadow-sm",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800/50 text-neutral-500 font-medium",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Team Member"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Sessions"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Hours"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Rate/Hour"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Payout"})]})}),s.jsx("tbody",{className:"divide-y divide-neutral-100 dark:divide-neutral-800",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-medium text-neutral-900 dark:text-white",children:e.odName})}),s.jsx("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:e.sessions}),(0,s.jsxs)("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:[e.totalHours,"h"]}),s.jsx("td",{className:"px-6 py-4 text-right",children:e.hourlyRate>0?(0,s.jsxs)("span",{className:"text-neutral-700 dark:text-neutral-300",children:[r(e.hourlyRate)," RON"]}):s.jsx("span",{className:"text-warning-600 text-xs font-medium",children:"Not set"})}),s.jsx("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("span",{className:(0,d.W)("font-bold",e.calculatedPayout>0?"text-neutral-900 dark:text-white":"text-neutral-400"),children:[r(e.calculatedPayout)," RON"]})})]},e.odId))}),s.jsx("tfoot",{className:"bg-neutral-50 dark:bg-neutral-800/50 font-medium",children:(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 text-neutral-700 dark:text-neutral-300",children:"Total"}),s.jsx("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:i}),(0,s.jsxs)("td",{className:"px-6 py-4 text-center text-neutral-700 dark:text-neutral-300",children:[Math.round(10*n)/10,"h"]}),s.jsx("td",{className:"px-6 py-4"}),s.jsx("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("span",{className:"font-bold text-neutral-900 dark:text-white",children:[r(a)," RON"]})})]})})]})})})]})}var w=r(76299);function P(){let e=new Date,[t,r]=(0,a.useState)(e.getFullYear()),[o,c]=(0,a.useState)(e.getMonth()),[x,m]=(0,a.useState)("invoices"),[p,h]=(0,a.useState)(new Set),{data:g,loading:j}=(0,w.Nx)(t,o),{data:N,loading:y}=(0,w.av)(),{data:f,loading:P}=(0,w.Su)(),{data:_,loading:M}=(0,w.lU)(),Z=j||y||P||M,q=(0,a.useMemo)(()=>Z?[]:function(e,t,r,s=new Set){let a=new Map;e.forEach(e=>{if(!e.clientId||"absent"===e.attendance)return;let t=a.get(e.clientId)||[];t.push(e),a.set(e.clientId,t)});let n=[];return a.forEach((e,a)=>{let l=t.find(e=>e.id===a);if(!l)return;let i=[],d=0;if(e.forEach(e=>{let t=r.find(t=>t.id===e.type),s=t?.basePrice||0;if(!(t?.isBillable!==!1))return;let a=e.duration||60;i.push({eventId:e.id,date:e.startTime,serviceType:e.type,serviceLabel:t?.label||e.type,duration:a,basePrice:s,amount:a/60*s}),d+=a}),0===i.length)return;let o=i.reduce((e,t)=>e+t.amount,0),c=o*(l.discountRate||0);n.push({clientId:a,clientName:l.name,sessions:i.length,totalHours:Math.round(d/60*10)/10,lineItems:i,subtotal:o,discount:c,total:o-c,status:s.has(a)?"paid":"pending"})}),n.sort((e,t)=>t.total-e.total),n}(g,N,f,p),[g,N,f,p,Z]),I=(0,a.useMemo)(()=>Z?[]:function(e,t){let r=new Map;e.forEach(e=>{if(!e.odId&&!e.therapistId)return;let t=e.odId||e.therapistId,s=r.get(t)||[];s.push(e),r.set(t,s)});let s=[];return r.forEach((e,r)=>{let a=t.find(e=>e.id===r);if(!a)return;let n=0,l=0;e.forEach(e=>{n+=e.duration||60,l++});let i=a.hourlyRate||0,d=Math.round(n/60*10)/10;s.push({odId:r,odName:a.name,sessions:l,totalHours:d,hourlyRate:i,calculatedPayout:d*i})}),s.sort((e,t)=>t.calculatedPayout-e.calculatedPayout),s}(g,_),[g,_,Z]),C=(0,a.useMemo)(()=>{let e,t,r,s,a;return e=0,t=0,r=0,s=0,a=0,q.forEach(n=>{e+=n.total,"paid"===n.status?(r+=n.total,a++):(t+=n.total,s++)}),{totalRevenue:e,pendingAmount:t,paidAmount:r,pendingCount:s,paidCount:a}},[q]),R=[{id:"invoices",label:"Client Invoices",icon:n.Z,count:q.length},{id:"payouts",label:"Team Payouts",icon:l.Z,count:I.length}];return(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Billing"}),s.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Manage client invoices and team payouts"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx(u,{year:t,month:o,onChange:(e,t)=>{r(e),c(t),h(new Set)}}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-neutral-200 dark:border-neutral-700 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors text-sm font-medium",children:[s.jsx(i,{className:"w-4 h-4"}),"Export"]})]})]}),s.jsx(b,{summary:C,loading:Z}),s.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-800",children:s.jsx("div",{className:"flex items-center gap-1",children:R.map(e=>{let t=e.icon;return(0,s.jsxs)("button",{onClick:()=>m(e.id),className:(0,d.W)("flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all relative",x===e.id?"text-primary-600 dark:text-primary-400":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:[s.jsx(t,{className:"w-4 h-4"}),e.label,s.jsx("span",{className:(0,d.W)("px-2 py-0.5 rounded-full text-xs font-bold",x===e.id?"bg-primary-100 dark:bg-primary-900/30 text-primary-600":"bg-neutral-100 dark:bg-neutral-800 text-neutral-500"),children:e.count}),x===e.id&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]},e.id)})})}),(0,s.jsxs)("div",{className:"pt-2",children:["invoices"===x&&s.jsx(v,{invoices:q,loading:Z,onMarkAsPaid:e=>{h(t=>{let r=new Set(Array.from(t));return r.add(e),r})},onMarkAsPending:e=>{h(t=>{let r=new Set(t);return r.delete(e),r})}}),"payouts"===x&&s.jsx(k,{payouts:I,loading:Z})]})]})}},3194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`C:\_WORK\_TEMPO\FINAL\_APP_v2\tempo-app-2\src\app\(dashboard)\billing\page.tsx`),{__esModule:a,$$typeof:n}=s,l=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[960,506,605,557],()=>r(22922));module.exports=s})();