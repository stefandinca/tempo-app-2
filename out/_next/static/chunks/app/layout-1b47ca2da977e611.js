(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{95538:function(e,t,n){Promise.resolve().then(n.t.bind(n,73649,23)),Promise.resolve().then(n.t.bind(n,63385,23)),Promise.resolve().then(n.bind(n,18628)),Promise.resolve().then(n.bind(n,25678)),Promise.resolve().then(n.bind(n,86151)),Promise.resolve().then(n.bind(n,20854)),Promise.resolve().then(n.bind(n,19685))},98998:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},61524:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},14562:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},97307:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},46578:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},80037:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},49108:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},37805:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},26490:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},28814:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},18994:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},50509:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},28670:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},56227:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},63854:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},11213:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},52235:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},47907:function(e,t,n){"use strict";var r=n(15313);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},20854:function(e,t,n){"use strict";n.r(t),n.d(t,{NotificationProvider:function(){return s},useNotifications:function(){return d}});var r=n(3827),i=n(64090),a=n(58121),l=n(1221),u=n(18628),c=n(10207);let o=(0,i.createContext)(void 0);function s(e){let{children:t}=e,{user:n}=function(){let e=(0,u.useAuth)(),t=(0,c.Sp)();return(null==e?void 0:e.user)&&!e.loading?{user:e.user,isParent:!1,isStaff:!0,loading:!1}:(null==t?void 0:t.user)&&t.isAuthenticated&&!t.loading?{user:t.user,isParent:!0,isStaff:!1,loading:!1}:{user:null,isParent:!1,isStaff:!1,loading:(null==e?void 0:e.loading)||(null==t?void 0:t.loading)||!1}}(),[s,d]=(0,i.useState)([]),[f,h]=(0,i.useState)(!0),[y,p]=(0,i.useState)(null),[v,k]=(0,i.useState)(!0),[m,g]=(0,i.useState)(null),[S,Z]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!n){d([]),h(!1);return}h(!0);let e=(0,a.IO)((0,a.hJ)(l.db,"notifications"),(0,a.ar)("recipientId","==",n.uid),(0,a.Xo)("createdAt","desc"),(0,a.b9)(20)),t=(0,a.cf)(e,e=>{d(e.docs.map(e=>{var t,n,r;return{id:e.id,...e.data(),createdAt:(null===(r=e.data().createdAt)||void 0===r?void 0:null===(n=r.toDate)||void 0===n?void 0:null===(t=n.call(r))||void 0===t?void 0:t.toISOString())||e.data().createdAt}})),h(!1),p(null),k(20===e.docs.length),g(e.docs[e.docs.length-1]||null)},e=>{console.error("Error fetching notifications:",e),p(e.message),h(!1)});return()=>t()},[n]);let b=(0,i.useMemo)(()=>s.filter(e=>!e.read).length,[s]),_=(0,i.useCallback)(async e=>{await (0,a.r7)((0,a.JU)(l.db,"notifications",e),{read:!0,readAt:a.EK.now()})},[]),x=(0,i.useCallback)(async()=>{let e=s.filter(e=>!e.read);await Promise.all(e.map(e=>(0,a.r7)((0,a.JU)(l.db,"notifications",e.id),{read:!0,readAt:a.EK.now()})))},[s]),P=(0,i.useCallback)(e=>"all"===e?s:"unread"===e?s.filter(e=>!e.read):s.filter(t=>t.category===e),[s]),A=(0,i.useCallback)(e=>"all"===e?s.length:"unread"===e?s.filter(e=>!e.read).length:s.filter(t=>t.category===e).length,[s]),w=(0,i.useCallback)(e=>{let t=e||s,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(r.getTime()-864e5),a=new Date(r.getTime()-6048e5),l={today:[],yesterday:[],thisWeek:[],older:[]};return t.forEach(e=>{let t=new Date(e.createdAt);t>=r?l.today.push(e):t>=i?l.yesterday.push(e):t>=a?l.thisWeek.push(e):l.older.push(e)}),l},[s]),I=(0,i.useCallback)(async()=>{if(!n||!m||!v)return;let e=(0,a.IO)((0,a.hJ)(l.db,"notifications"),(0,a.ar)("recipientId","==",n.uid),(0,a.Xo)("createdAt","desc"),(0,a.TQ)(m),(0,a.b9)(20)),t=await (0,a.PL)(e),r=t.docs.map(e=>{var t,n,r;return{id:e.id,...e.data(),createdAt:(null===(r=e.data().createdAt)||void 0===r?void 0:null===(n=r.toDate)||void 0===n?void 0:null===(t=n.call(r))||void 0===t?void 0:t.toISOString())||e.data().createdAt}});d(e=>[...e,...r]),k(20===t.docs.length),g(t.docs[t.docs.length-1]||null)},[n,m,v]);return(0,r.jsx)(o.Provider,{value:{notifications:s,unreadCount:b,loading:f,error:y,markAsRead:_,markAllAsRead:x,loadMore:I,hasMore:v,isDropdownOpen:S,setDropdownOpen:Z,filterByCategory:P,getGroupedNotifications:w,getCategoryCount:A},children:t})}function d(){let e=(0,i.useContext)(o);if(!e)throw Error("useNotifications must be used within NotificationProvider");return e}},10207:function(e,t,n){"use strict";n.d(t,{Sp:function(){return s},gx:function(){return o}});var r=n(3827),i=n(64090),a=n(27065),l=n(1221),u=n(58121);let c=(0,i.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,i.useState)(null),[s,d]=(0,i.useState)(null),[f,h]=(0,i.useState)(null),[y,p]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=(0,a.Aj)(l.I,async e=>{if(null==e?void 0:e.isAnonymous){o(e);let t=localStorage.getItem("parent_client_id"),n=localStorage.getItem("parent_client_name"),r=localStorage.getItem("parent_uid");t&&r===e.uid?(d(t),h(n)):(d(null),h(null))}else o(null),d(null),h(null);p(!1)});return()=>e()},[]);let v=(0,i.useCallback)(async(e,t)=>{try{let n=l.I.currentUser;n&&n.isAnonymous||(n=(await (0,a.XB)(l.I)).user);let r=(0,u.JU)(l.db,"clients",e);await (0,u.r7)(r,{parentUids:(0,u.vr)(n.uid)}),localStorage.setItem("parent_uid",n.uid),localStorage.setItem("parent_client_id",e),localStorage.setItem("parent_client_name",t),o(n),d(e),h(t),console.log("[ParentAuth] Successfully authenticated parent with UID:",n.uid)}catch(e){throw console.error("[ParentAuth] Error authenticating:",e),e}},[]),k=(0,i.useCallback)(async()=>{try{localStorage.removeItem("parent_uid"),localStorage.removeItem("parent_client_id"),localStorage.removeItem("parent_client_name"),localStorage.removeItem("parent_client_code"),await (0,a.w7)(l.I),o(null),d(null),h(null)}catch(e){console.error("[ParentAuth] Error signing out:",e)}},[]);return(0,r.jsx)(c.Provider,{value:{user:n,clientId:s,clientName:f,loading:y,isAuthenticated:null!==n&&null!==s,authenticateWithCode:v,signOut:k},children:t})}function s(){return(0,i.useContext)(c)}},63385:function(){},73649:function(e){e.exports={style:{fontFamily:"'__Inter_9824ce', '__Inter_Fallback_9824ce'",fontStyle:"normal"},className:"__className_9824ce"}},75504:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{W:function(){return r}})}},function(e){e.O(0,[358,139,373,258,970,151,971,69,744],function(){return e(e.s=95538)}),_N_E=e.O()}]);