(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6724],{55876:function(e,t,r){Promise.resolve().then(r.bind(r,94572))},43345:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},97336:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},10527:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},69475:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},81049:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},90684:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},72891:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},70699:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},77326:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},11213:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},34059:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(87461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},47907:function(e,t,r){"use strict";var a=r(15313);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},94572:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var a=r(3827),n=r(64090),l=r(21678),s=r(19685),i=r(11213),d=r(43345),o=r(77326),c=r(72891),u=r(10527),m=r(87461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var h=r(81049),g=r(97336),b=r(80037),p=r(18994);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,m.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var y=r(75504),v=r(2335),k=r(1221),j=r(58121);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,m.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var w=r(69475),C=r(90684),S=r(70699);function Z(){var e,t;let{data:r,loading:l}=(0,v.HX)(),{success:i,error:d}=(0,s.useToast)(),[o,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)({clinic:{name:"",cui:"",regNo:"",address:"",bank:"",iban:"",email:"",phone:""},invoicing:{seriesPrefix:"TMP",currentNumber:1,defaultDueDays:14,vatRate:0,footerNotes:""},emailTemplates:{subject:"Invoice #{series}-{number} from {clinic_name}",body:"Dear {client_name},\n\nPlease find attached the invoice for {month}.\n\nTotal Amount: {amount} RON\nDue Date: {due_date}\n\nThank you,\n{clinic_name}"}});(0,n.useEffect)(()=>{r&&m(e=>({...e,...r}))},[r]);let x=async()=>{c(!0);try{if(u.clinic.iban&&!/^[A-Z]{2}[0-9]{2}[A-Z0-9]{1,30}$/.test(u.clinic.iban.replace(/\s/g,"")))throw Error("Invalid IBAN format");await (0,j.pl)((0,j.JU)(k.db,"system_settings","config"),u,{merge:!0}),i("Billing configuration saved successfully")}catch(e){console.error(e),d(e.message||"Failed to save configuration")}finally{c(!1)}};return l?(0,a.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center text-primary-600",children:(0,a.jsx)(N,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Clinic Identity"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Legal details for invoice headers."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Clinic Legal Name"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. SC TEMPO THERAPY SRL",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.name,onChange:e=>m(t=>({...t,clinic:{...t.clinic,name:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Registration No. (CUI)"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. RO12345678",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.cui,onChange:e=>m(t=>({...t,clinic:{...t.clinic,cui:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Commerce Registry No."}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. J40/123/2020",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.regNo,onChange:e=>m(t=>({...t,clinic:{...t.clinic,regNo:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Address"}),(0,a.jsx)("textarea",{rows:2,placeholder:"Full legal address",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all resize-none",value:u.clinic.address,onChange:e=>m(t=>({...t,clinic:{...t.clinic,address:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Bank Name"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. Banca Transilvania",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.bank,onChange:e=>m(t=>({...t,clinic:{...t.clinic,bank:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"IBAN"}),(0,a.jsx)("input",{type:"text",placeholder:"RO98 BTRL...",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all font-mono text-sm",value:u.clinic.iban,onChange:e=>m(t=>({...t,clinic:{...t.clinic,iban:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Official Email"}),(0,a.jsx)("input",{type:"email",placeholder:"billing@tempo.com",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.email,onChange:e=>m(t=>({...t,clinic:{...t.clinic,email:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Phone"}),(0,a.jsx)("input",{type:"text",placeholder:"+40 7...",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.clinic.phone,onChange:e=>m(t=>({...t,clinic:{...t.clinic,phone:e.target.value}}))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-secondary-100 dark:bg-secondary-900/30 rounded-xl flex items-center justify-center text-secondary-600",children:(0,a.jsx)(w.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Invoice Parameters"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Defaults for automated generation."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Series Prefix"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. TMP",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all uppercase",value:u.invoicing.seriesPrefix,onChange:e=>m(t=>({...t,invoicing:{...t.invoicing,seriesPrefix:e.target.value.toUpperCase()}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Current Number"}),(0,a.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.invoicing.currentNumber,onChange:e=>m(t=>({...t,invoicing:{...t.invoicing,currentNumber:parseInt(e.target.value)||0}}))}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"Will increment automatically."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Payment Term (Days)"}),(0,a.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.invoicing.defaultDueDays,onChange:e=>m(t=>({...t,invoicing:{...t.invoicing,defaultDueDays:parseInt(e.target.value)||0}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"VAT Rate (%)"}),(0,a.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.invoicing.vatRate,onChange:e=>m(t=>({...t,invoicing:{...t.invoicing,vatRate:parseFloat(e.target.value)||0}}))})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Default Footer Notes"}),(0,a.jsx)("input",{type:"text",placeholder:"e.g. Thank you for your business!",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:u.invoicing.footerNotes,onChange:e=>m(t=>({...t,invoicing:{...t.invoicing,footerNotes:e.target.value}}))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-warning-100 dark:bg-warning-900/30 rounded-xl flex items-center justify-center text-warning-600",children:(0,a.jsx)(C.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Email Template"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Customize the email sent to parents."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Subject Line"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all",value:null===(e=u.emailTemplates)||void 0===e?void 0:e.subject,onChange:e=>m(t=>({...t,emailTemplates:{...t.emailTemplates,subject:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:"Email Body"}),(0,a.jsx)("textarea",{rows:6,className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all resize-none font-mono text-sm",value:null===(t=u.emailTemplates)||void 0===t?void 0:t.body,onChange:e=>m(t=>({...t,emailTemplates:{...t.emailTemplates,body:e.target.value}}))}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500 mt-2",children:["Available variables: ",(0,a.jsx)("code",{className:"bg-neutral-100 dark:bg-neutral-800 px-1 rounded",children:"{client_name}"}),", ",(0,a.jsx)("code",{className:"bg-neutral-100 dark:bg-neutral-800 px-1 rounded",children:"{month}"}),", ",(0,a.jsx)("code",{className:"bg-neutral-100 dark:bg-neutral-800 px-1 rounded",children:"{amount}"}),", ",(0,a.jsx)("code",{className:"bg-neutral-100 dark:bg-neutral-800 px-1 rounded",children:"{due_date}"}),", ",(0,a.jsx)("code",{className:"bg-neutral-100 dark:bg-neutral-800 px-1 rounded",children:"{clinic_name}"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsxs)("button",{onClick:x,disabled:o,className:"flex items-center gap-2 px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-primary-500/20 disabled:opacity-70 disabled:cursor-not-allowed",children:[o?(0,a.jsx)(p.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(S.Z,{className:"w-5 h-5"}),o?"Saving...":"Save Configuration"]})})]})}var E=r(21158),T=r(24905),D=r(12535);let M=["#4A90E2","#10B981","#8B5CF6","#F59E0B","#EC4899","#06B6D4","#84CC16","#F97316"];function P(){var e;let{t,i18n:r}=(0,D.$G)(),{user:m,userData:v,userRole:N,signOut:w,changeEmail:C,changePassword:S}=(0,l.useAuth)(),{success:P,error:I}=(0,s.useToast)(),[_,A]=(0,n.useState)("profile"),[R,O]=(0,n.useState)("light"),[U,z]=(0,n.useState)(!1),[H,J]=(0,n.useState)(""),[B,F]=(0,n.useState)(""),[q,L]=(0,n.useState)(""),[W,V]=(0,n.useState)(""),[X,G]=(0,n.useState)(M[0]),[$,K]=(0,n.useState)(null),Y=(0,n.useRef)(null);(0,n.useEffect)(()=>{v&&(J(v.name||""),F(v.email||(null==m?void 0:m.email)||""),L(v.phone||""),v.color&&G(v.color),v.photoURL&&K(v.photoURL))},[v,m]);let Q=(null==N?void 0:N.toLowerCase())==="admin",ee=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r&&m){if(!r.type.match("image.*")){I("Please select an image file (PNG, JPG)");return}z(!0);try{let e=(0,T.iH)(k.tO,"avatars/".concat(m.uid,"/").concat(r.name));await (0,T.KV)(e,r,{contentType:r.type});let t=await (0,T.Jt)(e),a=(0,j.JU)(k.db,"team_members",m.uid);await (0,j.r7)(a,{photoURL:t}),K(t),P("Avatar uploaded successfully")}catch(e){console.error(e),I("Failed to upload avatar")}finally{z(!1)}}},et=async()=>{if(m){z(!0);try{if(B!==m.email)try{await C(B)}catch(e){if("auth/requires-recent-login"===e.code){I(t("settings.profile.reauth_required")),z(!1);return}throw e}if(W)try{await S(W)}catch(e){if("auth/requires-recent-login"===e.code){I(t("settings.profile.reauth_required")),z(!1);return}throw e}let e=(0,j.JU)(k.db,"team_members",m.uid);await (0,j.r7)(e,{name:H,email:B,phone:q,color:X}),P(t("settings.profile.success")),V("")}catch(e){console.error(e),I(t("settings.profile.error"))}finally{z(!1)}}},er=async e=>{if(r.changeLanguage(e),m)try{let t=(0,j.JU)(k.db,"team_members",m.uid);await (0,j.r7)(t,{language:e})}catch(e){console.error("Error saving language preference:",e)}},ea=[{id:"profile",label:t("settings.tabs.profile"),icon:i.Z},{id:"notifications",label:t("settings.tabs.notifications"),icon:d.Z},{id:"security",label:t("settings.tabs.security"),icon:o.Z},{id:"appearance",label:t("settings.tabs.appearance"),icon:c.Z}];return Q&&ea.push({id:"billing",label:t("settings.tabs.billing"),icon:u.Z},{id:"system",label:t("settings.tabs.system"),icon:x}),(0,a.jsxs)("div",{className:"flex-1 p-6 max-w-5xl mx-auto w-full pb-24 lg:pb-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:t("settings.title")}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:t("settings.subtitle")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsxs)("nav",{className:"space-y-1",children:[ea.map(e=>(0,a.jsxs)("button",{onClick:()=>A(e.id),className:(0,y.W)("w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors text-left",_===e.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id)),(0,a.jsx)("div",{className:"pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-800",children:(0,a.jsxs)("button",{onClick:()=>w(),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm font-medium text-error-600 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors text-left",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),t("nav.sign_out")]})})]}),(0,a.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:["profile"===_&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:t("settings.profile.title")}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:t("settings.profile.subtitle")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-3xl font-bold text-white shadow-sm transition-all overflow-hidden border-4 border-white dark:border-neutral-800",style:{backgroundColor:$?"transparent":X},children:$?(0,a.jsx)("img",{src:$,alt:"Avatar",className:"w-full h-full object-cover"}):(null==v?void 0:v.initials)||(null==m?void 0:null===(e=m.email)||void 0===e?void 0:e[0].toUpperCase())||"U"}),(0,a.jsx)("button",{onClick:()=>{var e;null===(e=Y.current)||void 0===e||e.click()},className:"absolute inset-0 flex items-center justify-center bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(g.Z,{className:"w-6 h-6"})}),(0,a.jsx)("input",{type:"file",ref:Y,className:"hidden",accept:"image/png, image/jpeg, image/jpg",onChange:ee})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-3 w-full",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:t("settings.profile.avatar_color")}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:M.map(e=>(0,a.jsx)("button",{onClick:()=>G(e),className:(0,y.W)("w-8 h-8 rounded-full transition-all flex items-center justify-center",X===e?"ring-2 ring-offset-2 ring-primary-500 scale-110":"hover:scale-105 opacity-80 hover:opacity-100"),style:{backgroundColor:e},children:X===e&&(0,a.jsx)(b.Z,{className:"w-4 h-4 text-white"})},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:t("settings.profile.full_name")}),(0,a.jsx)("input",{type:"text",value:H,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:t("settings.profile.email")}),(0,a.jsx)("input",{type:"email",value:B,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:t("settings.profile.phone")}),(0,a.jsx)("input",{type:"tel",value:q,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:t("settings.profile.password")}),(0,a.jsx)("input",{type:"password",placeholder:t("settings.profile.password_placeholder"),value:W,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 transition-all"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300",children:t("common.role")}),(0,a.jsx)("input",{type:"text",value:N||"User",disabled:!0,className:"w-full px-3 py-2 bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-lg text-neutral-500 cursor-not-allowed"})]})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800 flex justify-end",children:(0,a.jsxs)("button",{onClick:et,disabled:U,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-primary-500/20 disabled:opacity-70 disabled:cursor-not-allowed",children:[U&&(0,a.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),t("common.save")]})})]}),"notifications"===_&&(0,a.jsx)(E.Z,{}),"appearance"===_&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:t("settings.appearance.theme")}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:t("settings.appearance.subtitle")})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4",children:["light","dark","system"].map(e=>(0,a.jsxs)("button",{onClick:()=>O(e),className:(0,y.W)("p-4 rounded-xl border-2 text-center transition-all",R===e?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700"),children:[(0,a.jsx)("p",{className:"text-sm font-bold capitalize text-neutral-900 dark:text-white",children:t("settings.appearance.themes.".concat(e))}),R===e&&(0,a.jsx)(b.Z,{className:"w-4 h-4 text-primary-500 mx-auto mt-2"})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-4 pt-8 border-t border-neutral-100 dark:border-neutral-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)(f,{className:"w-5 h-5 text-primary-500"}),t("settings.appearance.language")]}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Selectati limba preferata pentru aplicatie."})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{id:"ro",label:"Rom\xe2nÄƒ",flag:"\uD83C\uDDF7\uD83C\uDDF4"},{id:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"}].map(e=>(0,a.jsxs)("button",{onClick:()=>er(e.id),className:(0,y.W)("p-4 rounded-xl border-2 text-left transition-all flex items-center justify-between group",r.language.startsWith(e.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.flag}),(0,a.jsx)("span",{className:(0,y.W)("font-bold",r.language.startsWith(e.id)?"text-primary-700 dark:text-primary-300":"text-neutral-700 dark:text-neutral-300"),children:e.label})]}),r.language.startsWith(e.id)&&(0,a.jsx)(b.Z,{className:"w-5 h-5 text-primary-500"})]},e.id))})]})]}),"billing"===_&&Q&&(0,a.jsx)(Z,{}),"system"===_&&Q&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:t("settings.tabs.system")}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Advanced system configuration."})]}),(0,a.jsx)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800 rounded-xl text-center text-neutral-500",children:"System health metrics and feature flags will appear here."})]})]})]})]})}},21158:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var a=r(3827),n=r(64090),l=r(97307),s=r(46578),i=r(34059),d=r(11213),o=r(10527),c=r(43345),u=r(90684),m=r(18994),x=r(75504),h=r(19685);function g(){let{success:e}=(0,h.useToast)(),[t,r]=(0,n.useState)(!1),[g,b]=(0,n.useState)([{id:"schedule",label:"Schedule Changes",description:"Session created, updated, or cancelled",icon:l.Z,enabled:!0},{id:"attendance",label:"Attendance & Scores",description:"Attendance logged and score updates",icon:s.Z,enabled:!0},{id:"team",label:"Team Updates",description:"Team member assignments and changes",icon:i.Z,enabled:!1},{id:"client",label:"Client Updates",description:"New clients and profile changes",icon:d.Z,enabled:!0},{id:"billing",label:"Billing Alerts",description:"Invoices, payments, and overdue notices",icon:o.Z,enabled:!0}]),[p,f]=(0,n.useState)("daily"),y=e=>{b(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},v=async()=>{r(!0),await new Promise(e=>setTimeout(e,800)),r(!1),e("Notification preferences saved")};return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary-50 dark:bg-primary-900/20 flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"In-App Notifications"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Choose which notifications appear in the app"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-lg bg-white dark:bg-neutral-800 flex items-center justify-center shadow-sm",children:(0,a.jsx)(e.icon,{className:"w-4 h-4 text-neutral-600 dark:text-neutral-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900 dark:text-white text-sm",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:e.description})]})]}),(0,a.jsx)("button",{onClick:()=>y(e.id),className:(0,x.W)("w-12 h-6 rounded-full transition-colors relative flex-shrink-0",e.enabled?"bg-primary-500":"bg-neutral-300 dark:bg-neutral-700"),children:(0,a.jsx)("div",{className:(0,x.W)("absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform shadow-sm",e.enabled?"translate-x-6":"translate-x-0")})})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-secondary-50 dark:bg-secondary-900/20 flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-5 h-5 text-secondary-600 dark:text-secondary-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500",children:"Configure email digest frequency"})]})]}),(0,a.jsx)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900 dark:text-white text-sm",children:"Email Digest"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"How often to receive notification summaries"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"px-3 py-2 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg text-sm font-medium text-neutral-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all cursor-pointer",children:[(0,a.jsx)("option",{value:"instant",children:"Instant"}),(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"never",children:"Never"})]})]})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{onClick:v,disabled:t,className:"flex items-center gap-2 px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-primary-500/20 disabled:opacity-70 disabled:cursor-not-allowed",children:[t&&(0,a.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}),"Save Preferences"]})})]})}},19685:function(e,t,r){"use strict";r.r(t),r.d(t,{ToastProvider:function(){return b},useToast:function(){return p}});var a=r(3827),n=r(64090),l=r(89542),s=r(46578),i=r(98998),d=r(61524),o=r(28814),c=r(52235),u=r(75504);let m={success:s.Z,error:i.Z,warning:d.Z,info:o.Z},x={success:"bg-success-500 border-success-600 text-white",error:"bg-error-500 border-error-600 text-white",warning:"bg-warning-500 border-warning-600 text-white",info:"bg-primary-500 border-primary-600 text-white"};function h(e){let{id:t,message:r,type:l,duration:s=5e3,onDismiss:i}=e,d=m[l];return(0,n.useEffect)(()=>{console.log("Toast mounted:",t);let e=setTimeout(()=>{i(t)},s);return()=>clearTimeout(e)},[s,t,i]),(0,a.jsxs)("div",{className:(0,u.W)("flex items-start gap-3 p-4 rounded-lg shadow-lg border w-80 pointer-events-auto z-[9999]",x[l]),role:"alert",children:[(0,a.jsx)(d,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,a.jsx)("div",{className:"flex-1 text-sm font-medium",children:r}),(0,a.jsx)("button",{onClick:()=>i(t),className:"text-white/80 hover:text-white transition-colors",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})]})}let g=(0,n.createContext)(void 0);function b(e){let{children:t}=e,[r,s]=(0,n.useState)([]),[i,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{d(!0)},[]);let o=(0,n.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),c=(0,n.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;console.log("Showing toast:",e,t);let a=Math.random().toString(36).substring(2,9);s(n=>[...n,{id:a,message:e,type:t,duration:r,onDismiss:o}])},[o]),u=(0,n.useCallback)((e,t)=>c(e,"success",t),[c]),m=(0,n.useCallback)((e,t)=>c(e,"error",t),[c]),x=(0,n.useCallback)((e,t)=>c(e,"warning",t),[c]),b=(0,n.useCallback)((e,t)=>c(e,"info",t),[c]);return(0,a.jsxs)(g.Provider,{value:{showToast:c,success:u,error:m,warning:x,info:b},children:[t,i&&"undefined"!=typeof document&&(0,l.createPortal)((0,a.jsx)("div",{className:"fixed top-4 right-4 flex flex-col gap-2 max-h-screen pointer-events-none",style:{zIndex:999999},children:r.map(e=>(0,a.jsx)("div",{className:"pointer-events-auto animate-in slide-in-from-right-full fade-in duration-300",children:(0,a.jsx)(h,{...e})},e.id))}),document.body)]})}function p(){let e=(0,n.useContext)(g);if(!e)throw Error("useToast must be used within a ToastProvider");return e}},2335:function(e,t,r){"use strict";r.d(t,{HX:function(){return g},Nx:function(){return x},Rn:function(){return h},Su:function(){return c},av:function(){return d},b$:function(){return u},bI:function(){return p},gV:function(){return f},hI:function(){return i},lU:function(){return o},we:function(){return m},wm:function(){return b}});var a=r(64090),n=r(58121),l=r(1221);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{d(!0);let r=(0,n.IO)((0,n.hJ)(l.db,e),...t),a=(0,n.cf)(r,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),s(t),d(!1)},t=>{console.error("Error fetching ".concat(e,":"),t),c(t.message),d(!1)});return()=>a()},[e]),{data:r,loading:i,error:o}}function i(){return s("events")}function d(){return s("clients")}function o(){return s("team_members")}function c(){return s("services")}function u(){return s("programs")}function m(e){let[t,r]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){i(!1);return}let t=(0,n.IO)((0,n.hJ)(l.db,"events"),(0,n.ar)("clientId","==",e),(0,n.Xo)("startTime","asc")),a=(0,n.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching client events:",e),o(e.message),i(!1)});return()=>a()},[e]),{data:t,loading:s,error:d}}function x(e,t){let[r,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r=new Date(e,t,1),a=new Date(e,t+1,0,23,59,59,999),i=(0,n.IO)((0,n.hJ)(l.db,"events"),(0,n.ar)("startTime",">=",r.toISOString()),(0,n.ar)("startTime","<=",a.toISOString()),(0,n.Xo)("startTime","asc")),o=(0,n.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),s(t),d(!1)},e=>{console.error("Error fetching events by month:",e),c(e.message),d(!1)});return()=>o()},[e,t]),{data:r,loading:i,error:o}}function h(e){let[t,r]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e){r([]),i(!1);return}let t=(0,n.IO)((0,n.hJ)(l.db,"clients",e,"interventionPlans"),(0,n.Xo)("createdAt","desc")),a=(0,n.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching intervention plans:",e),o(e.message),i(!1)});return()=>a()},[e]);let c=t.find(e=>"active"===e.status)||null;return{data:t,loading:s,error:d,activePlan:c,getActivePlanForDate:e=>t.find(t=>{if("active"!==t.status)return!1;let r=new Date(t.startDate),a=new Date(t.endDate);return a.setHours(23,59,59,999),e>=r&&e<=a})||null}}function g(){let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=(0,n.cf)((0,n.JU)(l.db,"system_settings","config"),e=>{e.exists()?t(e.data()):t(null),s(!1)},e=>{console.error("Error fetching system settings:",e),d(e.message),s(!1)});return()=>e()},[]),{data:e,loading:r,error:i}}function b(e){let[t,r]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){i(!1);return}let t=(0,n.IO)((0,n.hJ)(l.db,"invoices"),(0,n.ar)("clientId","==",e),(0,n.Xo)("date","desc")),a=(0,n.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching client invoices:",e),o(e.message),i(!1)});return()=>a()},[e]),{data:t,loading:s,error:d}}function p(e,t){let[r,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-01"),a="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-31"),i=(0,n.IO)((0,n.hJ)(l.db,"invoices"),(0,n.ar)("date",">=",r),(0,n.ar)("date","<=",a),(0,n.Xo)("date","desc")),o=(0,n.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),s(t),d(!1)},e=>{console.error("Error fetching monthly invoices:",e),c(e.message),d(!1)});return()=>o()},[e,t]),{data:r,loading:i,error:o}}function f(e,t){let[r,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r="".concat(e,"-").concat(String(t+1).padStart(2,"0")),a=(0,n.IO)((0,n.hJ)(l.db,"payouts"),(0,n.ar)("month","==",r)),i=(0,n.cf)(a,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),s(t),d(!1)},e=>{console.error("Error fetching monthly payouts:",e),c(e.message),d(!1)});return()=>i()},[e,t]),{data:r,loading:i,error:o}}}},function(e){e.O(0,[4358,139,5050,8234,1482,1678,2971,8069,1744],function(){return e(e.s=55876)}),_N_E=e.O()}]);