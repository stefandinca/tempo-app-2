(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{93347:function(e,t,r){Promise.resolve().then(r.bind(r,85015))},53879:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},28814:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},18994:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},85904:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},70094:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28670:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},47907:function(e,t,r){"use strict";var n=r(15313);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},85015:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(3827),a=r(64090),s=r(18628),l=r(75504),i=r(70094),u=r(28670);function o(e){let{threads:t,activeThreadId:r,onSelectThread:a,onNewChat:o}=e,{user:c}=(0,s.useAuth)();return(0,n.jsxs)("div",{className:"w-full lg:w-80 border-r border-neutral-200 dark:border-neutral-800 flex flex-col bg-white dark:bg-neutral-900",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"font-bold text-lg text-neutral-900 dark:text-white",children:"Messages"}),(0,n.jsx)("button",{onClick:o,className:"p-2 rounded-full bg-primary-50 dark:bg-primary-900/20 text-primary-600 hover:bg-primary-100 transition-colors",children:(0,n.jsx)(i.Z,{className:"w-5 h-5"})})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search messages...",className:"w-full pl-10 pr-4 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all"})]})}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[t.map(e=>{var t,s;let i=e.participants.find(e=>e!==(null==c?void 0:c.uid)),u=e.participantDetails[i||""],o=e.lastMessage&&!e.lastMessage.readBy.includes((null==c?void 0:c.uid)||"");return(0,n.jsxs)("button",{onClick:()=>a(e.id),className:(0,l.W)("w-full p-4 flex items-start gap-3 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors text-left border-b border-neutral-50 dark:border-neutral-800/50",r===e.id&&"bg-primary-50/50 dark:bg-primary-900/10 border-l-4 border-l-primary-500"),children:[(0,n.jsx)("div",{className:"w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center text-white font-bold shadow-sm",style:{backgroundColor:(null==u?void 0:u.color)||"#ccc"},children:(null==u?void 0:u.initials)||"??"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,n.jsx)("h3",{className:(0,l.W)("font-bold text-sm truncate",o?"text-neutral-900 dark:text-white":"text-neutral-700 dark:text-neutral-300"),children:(null==u?void 0:u.name)||"Unknown"}),(0,n.jsx)("span",{className:"text-[10px] text-neutral-400",children:null===(t=e.updatedAt)||void 0===t?void 0:t.toDate().toLocaleDateString([],{month:"short",day:"numeric"})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:(0,l.W)("text-xs truncate pr-4",o?"font-bold text-neutral-900 dark:text-white":"text-neutral-500 dark:text-neutral-400"),children:(null===(s=e.lastMessage)||void 0===s?void 0:s.text)||"Started a conversation"}),o&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary-500 flex-shrink-0"})]})]})]},e.id)}),0===t.length&&(0,n.jsxs)("div",{className:"text-center py-12 px-4",children:[(0,n.jsx)("p",{className:"text-sm text-neutral-500",children:"No conversations yet."}),(0,n.jsx)("button",{onClick:o,className:"mt-2 text-sm text-primary-600 font-medium hover:underline",children:"Start chatting"})]})]})]})}var c=r(58121),d=r(1221);function f(){let{user:e,userData:t}=(0,s.useAuth)();return{sendMessage:async(t,r)=>{if(!e||!r.trim())return;let n={senderId:e.uid,text:r.trim(),timestamp:(0,c.Bt)(),type:"text"};await (0,c.ET)((0,c.hJ)(d.db,"threads",t,"messages"),n),await (0,c.r7)((0,c.JU)(d.db,"threads",t),{lastMessage:{text:r.trim(),senderId:e.uid,timestamp:(0,c.Bt)(),readBy:[e.uid]},updatedAt:(0,c.Bt)()})},createOrGetThread:async r=>{if(!e||!t)return null;let n=[e.uid,r.id].sort().join("_"),a=(0,c.JU)(d.db,"threads",n);if(!(await (0,c.QT)(a)).exists()){let n={id:e.uid,name:t.name||"Unknown",initials:t.initials||"??",color:t.color||"#ccc",role:t.role||"Staff"};await (0,c.pl)(a,{participants:[e.uid,r.id],participantDetails:{[e.uid]:n,[r.id]:r},createdAt:(0,c.Bt)(),updatedAt:(0,c.Bt)()})}return n},markAsRead:async t=>{e&&await (0,c.r7)((0,c.JU)(d.db,"threads",t),{"lastMessage.readBy":(0,c.vr)(e.uid)})}}}function m(e){var t;let{message:r}=e,{user:a}=(0,s.useAuth)(),i=r.senderId===(null==a?void 0:a.uid);return(0,n.jsx)("div",{className:(0,l.W)("flex w-full mb-4 animate-in fade-in slide-in-from-bottom-2 duration-300",i?"justify-end":"justify-start"),children:(0,n.jsxs)("div",{className:(0,l.W)("max-w-[75%] px-4 py-2 rounded-2xl shadow-sm",i?"bg-primary-500 text-white rounded-tr-none":"bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 rounded-tl-none"),children:[(0,n.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:r.text}),(0,n.jsx)("p",{className:(0,l.W)("text-[10px] mt-1 text-right opacity-70",i?"text-primary-100":"text-neutral-500"),children:(null===(t=r.timestamp)||void 0===t?void 0:t.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"sending..."})]})})}var h=r(28814),x=r(53879),p=r(85904),g=r(87461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,g.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);var v=r(18994);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,g.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function j(e){let{thread:t,onBack:r}=e,{user:l}=(0,s.useAuth)(),{messages:i,loading:u}=function(e){let[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!e){r([]);return}s(!0);let t=(0,c.IO)((0,c.hJ)(d.db,"threads",e,"messages"),(0,c.Xo)("timestamp","asc")),n=(0,c.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),s(!1)});return()=>n()},[e]),{messages:t,loading:n}}((null==t?void 0:t.id)||null),{sendMessage:o,markAsRead:g}=f(),[j,w]=(0,a.useState)(""),N=(0,a.useRef)(null);(0,a.useEffect)(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[i]),(0,a.useEffect)(()=>{(null==t?void 0:t.id)&&g(t.id)},[null==t?void 0:t.id,i,g]);let k=async e=>{e.preventDefault(),(null==t?void 0:t.id)&&j.trim()&&(w(""),await o(t.id,j))};if(!t)return(0,n.jsxs)("div",{className:"hidden lg:flex flex-1 flex-col items-center justify-center bg-neutral-50 dark:bg-neutral-900/50 text-neutral-500",children:[(0,n.jsx)("div",{className:"w-20 h-20 rounded-full bg-neutral-100 dark:bg-neutral-800 flex items-center justify-center mb-4",children:(0,n.jsx)(h.Z,{className:"w-10 h-10"})}),(0,n.jsx)("h3",{className:"text-lg font-bold",children:"Select a conversation"}),(0,n.jsx)("p",{className:"text-sm",children:"Choose a colleague to start messaging"})]});let S=t.participants.find(e=>e!==(null==l?void 0:l.uid)),E=t.participantDetails[S||""];return(0,n.jsxs)("div",{className:"flex-1 flex flex-col bg-white dark:bg-neutral-900 animate-in fade-in duration-300",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{onClick:r,className:"lg:hidden p-2 -ml-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,n.jsx)(x.Z,{className:"w-5 h-5"})}),(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-sm",style:{backgroundColor:(null==E?void 0:E.color)||"#ccc"},children:(null==E?void 0:E.initials)||"??"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold text-sm text-neutral-900 dark:text-white",children:(null==E?void 0:E.name)||"Unknown User"}),(0,n.jsx)("p",{className:"text-[10px] text-neutral-500 font-medium",children:(null==E?void 0:E.role)||"Staff"})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{className:"p-2 rounded-lg text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,n.jsx)(p.Z,{className:"w-5 h-5"})}),(0,n.jsx)("button",{className:"p-2 rounded-lg text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,n.jsx)(b,{className:"w-5 h-5"})}),(0,n.jsx)("button",{className:"p-2 rounded-lg text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,n.jsx)(h.Z,{className:"w-5 h-5"})})]})]}),(0,n.jsxs)("div",{ref:N,className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[u&&0===i.length?(0,n.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,n.jsx)(v.Z,{className:"w-6 h-6 animate-spin text-primary-500"})}):i.map(e=>(0,n.jsx)(m,{message:e},e.id)),0===i.length&&!u&&(0,n.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-50 py-12",children:(0,n.jsx)("p",{className:"text-sm",children:"No messages yet. Say hello!"})})]}),(0,n.jsx)("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800",children:(0,n.jsxs)("form",{onSubmit:k,className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2.5 bg-neutral-100 dark:bg-neutral-800 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all"}),(0,n.jsx)("button",{type:"submit",disabled:!j.trim(),className:"p-2.5 rounded-xl bg-primary-500 text-white hover:bg-primary-600 disabled:opacity-50 disabled:hover:bg-primary-500 transition-all",children:(0,n.jsx)(y,{className:"w-5 h-5"})})]})})]})}var w=r(52235),N=r(2335);function k(e){let{isOpen:t,onClose:r,onStartChat:l}=e,{user:i}=(0,s.useAuth)(),{data:o,loading:c}=(0,N.lU)(),[d,f]=(0,a.useState)("");if(!t)return null;let m=o.filter(e=>{var t,r;return e.id!==(null==i?void 0:i.uid)&&((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null===(r=e.role)||void 0===r?void 0:r.toLowerCase().includes(d.toLowerCase())))});return(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-300",children:(0,n.jsxs)("div",{className:"bg-white dark:bg-neutral-900 w-full max-w-md rounded-2xl shadow-xl overflow-hidden animate-in zoom-in-95 duration-300",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-bold text-lg text-neutral-900 dark:text-white",children:"New Conversation"}),(0,n.jsx)("button",{onClick:r,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:(0,n.jsx)(w.Z,{className:"w-5 h-5"})})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search team members...",value:d,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all"})]})}),(0,n.jsx)("div",{className:"max-h-[400px] overflow-y-auto p-2 space-y-1 custom-scrollbar",children:c?(0,n.jsxs)("div",{className:"py-12 flex flex-col items-center justify-center text-neutral-500",children:[(0,n.jsx)(v.Z,{className:"w-8 h-8 animate-spin mb-2"}),(0,n.jsx)("p",{className:"text-sm",children:"Loading team..."})]}):0===m.length?(0,n.jsx)("div",{className:"py-12 text-center text-neutral-500",children:(0,n.jsx)("p",{className:"text-sm",children:"No team members found."})}):m.map(e=>(0,n.jsxs)("button",{onClick:()=>{l({id:e.id,name:e.name,initials:e.initials,color:e.color,role:e.role})},className:"w-full p-3 flex items-center gap-3 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 rounded-xl transition-colors text-left",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs shadow-sm",style:{backgroundColor:e.color||"#ccc"},children:e.initials}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-bold text-sm text-neutral-900 dark:text-white",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-primary-600 dark:text-primary-400 font-medium",children:e.role})]})]},e.id))})]})})}function S(){let{threads:e,loading:t}=function(){let{user:e}=(0,s.useAuth)(),[t,r]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{if(!e)return;let t=(0,c.IO)((0,c.hJ)(d.db,"threads"),(0,c.ar)("participants","array-contains",e.uid),(0,c.Xo)("updatedAt","desc")),n=(0,c.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),l(!1)});return()=>n()},[e]),{threads:t,loading:n}}(),{createOrGetThread:r}=f(),[i,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"new-message"===sessionStorage.getItem("commandPaletteAction")&&(h(!0),sessionStorage.removeItem("commandPaletteAction"))},[]);let x=async e=>{let t=await r(e);t&&(u(t),h(!1))},p=e.find(e=>e.id===i)||null;return(0,n.jsxs)("div",{className:"flex-1 flex overflow-hidden h-[calc(100dvh-64px)] lg:h-[calc(100vh-64px)] relative",children:[(0,n.jsx)("div",{className:(0,l.W)("flex",i?"hidden lg:flex":"flex w-full lg:w-auto"),children:(0,n.jsx)(o,{threads:e,activeThreadId:i,onSelectThread:u,onNewChat:()=>h(!0)})}),(0,n.jsx)("div",{className:(0,l.W)("flex-1",i?"flex":"hidden lg:flex"),children:(0,n.jsx)(j,{thread:p,onBack:()=>u(null)})}),(0,n.jsx)(k,{isOpen:m,onClose:()=>h(!1),onStartChat:x})]})}},18628:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return c},useAuth:function(){return d}});var n=r(3827),a=r(64090),s=r(27065),l=r(1221),i=r(58121),u=r(47907);let o=(0,a.createContext)({});function c(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[d,f]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),g=(0,u.useRouter)();(0,a.useEffect)(()=>{let e=null,t=(0,s.Aj)(l.I8,async t=>{c(t),e&&(e(),e=null),t?e=(0,i.cf)((0,i.JU)(l.db,"team_members",t.uid),e=>{if(e.exists()){let t=e.data();f(t),h(t.role),p(!1)}else(0,i.cf)((0,i.JU)(l.db,"clients",t.uid),e=>{e.exists()?(f(e.data()),h("Parent")):(f(null),h(null)),p(!1)})}):(f(null),h(null),p(!1))});return()=>{t(),e&&e()}},[g]);let b=async(e,t)=>{await (0,s.e5)(l.I8,e,t)},v=async()=>{await (0,s.w7)(l.I8),g.push("/login")};return(0,n.jsx)(o.Provider,{value:{user:r,userData:d,userRole:m,loading:x,signIn:b,signOut:v},children:!x&&t})}let d=()=>(0,a.useContext)(o)},2335:function(e,t,r){"use strict";r.d(t,{HX:function(){return x},Nx:function(){return m},Rn:function(){return h},Su:function(){return c},av:function(){return u},b$:function(){return d},bI:function(){return g},gV:function(){return b},hI:function(){return i},lU:function(){return o},we:function(){return f},wm:function(){return p}});var n=r(64090),a=r(58121),s=r(1221);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[r,l]=(0,n.useState)([]),[i,u]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{u(!0);let r=(0,a.IO)((0,a.hJ)(s.db,e),...t),n=(0,a.cf)(r,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),u(!1)},t=>{console.error("Error fetching ".concat(e,":"),t),c(t.message),u(!1)});return()=>n()},[e]),{data:r,loading:i,error:o}}function i(){return l("events")}function u(){return l("clients")}function o(){return l("team_members")}function c(){return l("services")}function d(){return l("programs")}function f(e){let[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[u,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e){i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"events"),(0,a.ar)("clientId","==",e),(0,a.Xo)("startTime","asc")),n=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching client events:",e),o(e.message),i(!1)});return()=>n()},[e]),{data:t,loading:l,error:u}}function m(e,t){let[r,l]=(0,n.useState)([]),[i,u]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),i=(0,a.IO)((0,a.hJ)(s.db,"events"),(0,a.ar)("startTime",">=",r.toISOString()),(0,a.ar)("startTime","<=",n.toISOString()),(0,a.Xo)("startTime","asc")),o=(0,a.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),u(!1)},e=>{console.error("Error fetching events by month:",e),c(e.message),u(!1)});return()=>o()},[e,t]),{data:r,loading:i,error:o}}function h(e){let[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[u,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!e){r([]),i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"clients",e,"interventionPlans"),(0,a.Xo)("createdAt","desc")),n=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching intervention plans:",e),o(e.message),i(!1)});return()=>n()},[e]);let c=t.find(e=>"active"===e.status)||null;return{data:t,loading:l,error:u,activePlan:c,getActivePlanForDate:e=>t.find(t=>{if("active"!==t.status)return!1;let r=new Date(t.startDate),n=new Date(t.endDate);return n.setHours(23,59,59,999),e>=r&&e<=n})||null}}function x(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[i,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=(0,a.cf)((0,a.JU)(s.db,"system_settings","config"),e=>{e.exists()?t(e.data()):t(null),l(!1)},e=>{console.error("Error fetching system settings:",e),u(e.message),l(!1)});return()=>e()},[]),{data:e,loading:r,error:i}}function p(e){let[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[u,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e){i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"invoices"),(0,a.ar)("clientId","==",e),(0,a.Xo)("date","desc")),n=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),r(t),i(!1)},e=>{console.error("Error fetching client invoices:",e),o(e.message),i(!1)});return()=>n()},[e]),{data:t,loading:l,error:u}}function g(e,t){let[r,l]=(0,n.useState)([]),[i,u]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let r="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-01"),n="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-31"),i=(0,a.IO)((0,a.hJ)(s.db,"invoices"),(0,a.ar)("date",">=",r),(0,a.ar)("date","<=",n),(0,a.Xo)("date","desc")),o=(0,a.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),u(!1)},e=>{console.error("Error fetching monthly invoices:",e),c(e.message),u(!1)});return()=>o()},[e,t]),{data:r,loading:i,error:o}}function b(e,t){let[r,l]=(0,n.useState)([]),[i,u]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let r="".concat(e,"-").concat(String(t+1).padStart(2,"0")),n=(0,a.IO)((0,a.hJ)(s.db,"payouts"),(0,a.ar)("month","==",r)),i=(0,a.cf)(n,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),u(!1)},e=>{console.error("Error fetching monthly payouts:",e),c(e.message),u(!1)});return()=>i()},[e,t]),{data:r,loading:i,error:o}}},1221:function(e,t,r){"use strict";r.d(t,{Fw:function(){return f},I8:function(){return o},db:function(){return c},tO:function(){return d}});var n=r(26142),a=r(27065),s=r(58121),l=r(24905),i=r(76079);let u=0===(0,n.C6)().length?(0,n.ZF)({apiKey:"AIzaSyBLyN1jo8PpJ5OMtkEuC4auhuuviapB3Bs",authDomain:"tempo-app-2.firebaseapp.com",projectId:"tempo-app-2",storageBucket:"tempo-app-2.firebasestorage.app",messagingSenderId:"47813899076",appId:"1:47813899076:web:cd597912a0755195241d11"}):(0,n.C6)()[0],o=(0,a.v0)(u),c=(0,s.ad)(u),d=(0,l.cF)(u),f=(0,i.KL)(u)},75504:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}})}},function(e){e.O(0,[358,139,233,971,69,744],function(){return e(e.s=93347)}),_N_E=e.O()}]);