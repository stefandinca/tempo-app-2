(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6648],{55351:function(e,t,a){Promise.resolve().then(a.bind(a,13726))},26490:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},44715:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},69475:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},13726:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(3827),n=a(87461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var l=a(26490),i=a(57976);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var d=a(69475),o=a(44715);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,n.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var u=a(66912),h=a(2335),m=a(87134),p=a(64090),b=a(75504);function f(){let{data:e,loading:t,error:a}=(0,u.Ej)(),{data:n,loading:f}=(0,h.wm)((null==e?void 0:e.id)||""),[y,g]=(0,p.useState)(null),j=(0,p.useMemo)(()=>n.filter(e=>"issued"===e.status||"overdue"===e.status).reduce((e,t)=>e+t.total,0),[n]),w=(0,p.useMemo)(()=>n.filter(e=>"paid"!==e.status),[n]),v=(0,p.useMemo)(()=>n.filter(e=>"paid"===e.status),[n]);if(t||f)return(0,s.jsx)(u.tu,{});if(a||!e)return(0,s.jsx)(u.tM,{message:a||"Could not load billing data."});let k=async e=>{g(e.id);try{let t={series:e.series,number:e.number,date:e.date,dueDate:e.dueDate,clinic:e.clinic,client:e.client,items:e.items,total:e.total,currency:e.currency,date:new Date(e.date).toLocaleDateString("ro-RO"),dueDate:new Date(e.dueDate).toLocaleDateString("ro-RO")},a=(0,m.q)(t),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="Invoice_".concat(e.series).concat(e.number,".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}catch(e){console.error("Download failed",e),alert("Failed to download invoice.")}finally{g(null)}};return(0,s.jsxs)("div",{className:"p-4 space-y-6 animate-in fade-in slide-in-from-right-4 duration-500 pb-20 font-sans",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Invoices & Payments"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm",children:"Manage your billing and view history"})]}),(0,s.jsxs)("div",{className:(0,b.W)("rounded-3xl border p-6 shadow-sm overflow-hidden relative",j>0?"bg-warning-50 border-warning-100 dark:bg-warning-900/10 dark:border-warning-900/30":"bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800"),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,s.jsx)(r,{className:"w-24 h-24"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2 py-4",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"Current Balance"}),(0,s.jsxs)("h2",{className:"text-5xl font-black text-neutral-900 dark:text-white",children:[j.toFixed(2)," RON"]}),(0,s.jsx)("div",{className:(0,b.W)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider",j>0?"bg-warning-100 text-warning-700":"bg-success-50 text-success-700 dark:bg-success-900/20 dark:text-success-400"),children:j>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"w-3 h-3"})," Payment Pending"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-3 h-3"})," All Paid"]})})]}),j>0&&(0,s.jsxs)("button",{onClick:()=>alert("Online payments coming soon."),className:"w-full mt-6 py-4 bg-primary-600 hover:bg-primary-700 text-white rounded-2xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary-500/20",children:["Pay Balance Online",(0,s.jsx)(c,{className:"w-5 h-5"})]})]}),w.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-bold text-neutral-900 dark:text-white px-2",children:"Payment Required"}),(0,s.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-warning-50 dark:bg-warning-900/20 text-warning-600 flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:["Invoice #",e.series,"-",e.number]}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500",children:["Issued: ",new Date(e.date).toLocaleDateString()]}),(0,s.jsxs)("p",{className:"text-xs text-error-500 font-medium",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-4 w-full sm:w-auto border-t sm:border-0 border-neutral-100 dark:border-neutral-800 pt-3 sm:pt-0",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-black text-neutral-900 dark:text-white",children:[e.total.toFixed(2)," RON"]}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase text-warning-600",children:"Unpaid"})]}),(0,s.jsx)("button",{onClick:()=>k(e),disabled:y===e.id,className:"p-3 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl text-neutral-600 dark:text-neutral-300 transition-colors",title:"Download PDF",children:y===e.id?(0,s.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(o.Z,{className:"w-5 h-5"})})]})]},e.id))})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-neutral-900 dark:text-white px-2 flex items-center gap-2",children:[(0,s.jsx)(x,{className:"w-4 h-4 text-neutral-400"}),"Paid History"]}),v.length>0?(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm overflow-hidden",children:(0,s.jsx)("div",{className:"divide-y divide-neutral-100 dark:divide-neutral-800",children:v.map(e=>(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-success-50 dark:bg-success-900/20 text-success-600 flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:["#",e.series,"-",e.number]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:new Date(e.date).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:[e.total.toFixed(2)," RON"]}),(0,s.jsx)("button",{onClick:()=>k(e),className:"text-neutral-400 hover:text-primary-600 transition-colors",children:(0,s.jsx)(o.Z,{className:"w-4 h-4"})})]})]},e.id))})}):(0,s.jsxs)("div",{className:"text-center py-10 opacity-50",children:[(0,s.jsx)(r,{className:"w-12 h-12 mx-auto mb-2 text-neutral-300"}),(0,s.jsx)("p",{className:"text-sm text-neutral-500",children:"No payment history available."})]})]}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-400 text-center px-6 leading-relaxed",children:"Payments are synchronized within 24 hours. For urgent billing issues, please contact the clinic administration directly."})]})}},87134:function(e,t,a){"use strict";a.d(t,{q:function(){return r}});var s=a(92493),n=a(25264);let r=e=>{let t=new s.default;t.setFontSize(20),t.text("INVOICE",150,20),t.setFontSize(10),t.text("Series: ".concat(e.series),150,30),t.text("Number: ".concat(e.number),150,35),t.text("Date: ".concat(e.date),150,40),t.text("Due Date: ".concat(e.dueDate),150,45),t.setFontSize(12),t.setFont("helvetica","bold"),t.text(e.clinic.name,14,20),t.setFont("helvetica","normal"),t.setFontSize(10);let a=25;t.text(e.clinic.address,14,a+=5,{maxWidth:80}),a+=(t.splitTextToSize(e.clinic.address,80).length-1)*5,t.text("CUI: ".concat(e.clinic.cui),14,a+=5),t.text("Reg. Com: ".concat(e.clinic.regNo),14,a+=5),t.text("Bank: ".concat(e.clinic.bank),14,a+=5),t.text("IBAN: ".concat(e.clinic.iban),14,a+=5),t.text("Email: ".concat(e.clinic.email),14,a+=5),t.setFont("helvetica","bold"),t.text("Bill To:",150,60),t.setFont("helvetica","normal"),t.text(e.client.name,150,65),e.client.address&&t.text(e.client.address,150,70,{maxWidth:50});let r=Math.max(a+15,90);(0,n.default)(t,{startY:r,head:[["Description","Qty","Unit","Price","Amount"]],body:e.items.map(e=>[e.description,e.quantity,e.unit,e.price.toFixed(2),e.amount.toFixed(2)]),theme:"striped",headStyles:{fillColor:[74,144,226]},foot:[["","","","Total","".concat(e.total.toFixed(2)," ").concat(e.currency)]],footStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"}});let l=t.lastAutoTable.finalY+20;return t.setFontSize(10),t.text("Thank you for your business!",14,l),t.setFontSize(8),t.text("This invoice was generated automatically by TempoApp.",14,280),t.output("blob")}}},function(e){e.O(0,[4358,139,2505,3125,5233,7232,5264,9150,2971,8069,1744],function(){return e(e.s=55351)}),_N_E=e.O()}]);