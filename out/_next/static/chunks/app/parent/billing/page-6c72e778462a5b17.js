(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6648],{55351:function(e,t,n){Promise.resolve().then(n.bind(n,13726))},98998:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},57976:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},26490:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},44715:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},69475:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},66912:function(e,t,n){"use strict";n.d(t,{Ej:function(){return u},tM:function(){return h},tu:function(){return d}});var r=n(3827),a=n(64090),s=n(1221),l=n(58121),i=n(18994),c=n(98998),o=n(10207);function u(){let{isAuthenticated:e,clientId:t,loading:n}=(0,o.jT)(),[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[g,y]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null);return(0,a.useEffect)(()=>{n&&y(!0)},[n]),(0,a.useEffect)(()=>{if(n)return;if(!e||!t){y(!1);return}y(!0),v(null);let r=(0,l.hJ)(s.db,"clients"),a=(0,l.IO)(r,(0,l.ar)("__name__","==",t)),c=null,o=null,d=null,m=null,x=(0,l.cf)(a,e=>{if(e.empty){v("Portal session invalid or expired."),y(!1);return}let n=e.docs[0];i({id:n.id,...n.data()}),c&&c();let r=(0,l.IO)((0,l.hJ)(s.db,"events"),(0,l.ar)("clientId","==",t),(0,l.Xo)("startTime","asc"));c=(0,l.cf)(r,e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),u(t)},e=>{console.error("Sessions fetch error:",e)}),o&&o(),o=(0,l.cf)((0,l.hJ)(s.db,"services"),e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),h(t)}),d&&d(),d=(0,l.cf)((0,l.hJ)(s.db,"programs"),e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),f(t)}),m&&m();let a=(0,l.IO)((0,l.hJ)(s.db,"clients",t,"evaluations"),(0,l.ar)("status","==","completed")),x=(0,l.IO)((0,l.hJ)(s.db,"clients",t,"vbmapp_evaluations"),(0,l.ar)("status","==","completed")),g=[],b=[],w=()=>{p([...g,...b].sort((e,t)=>{let n=new Date(e.completedAt||e.createdAt).getTime();return new Date(t.completedAt||t.createdAt).getTime()-n})),y(!1)};m=(0,l.cf)(a,e=>{g=e.docs.map(e=>({id:e.id,...e.data()})),w()}),(0,l.cf)(x,e=>{b=e.docs.map(e=>({id:e.id,...e.data()})),w()})},e=>{console.error("Client fetch error:",e),v(e.message),y(!1)});return()=>{x(),c&&c(),o&&o(),d&&d(),m&&m()}},[e,t,n]),{data:r,sessions:c,services:d,programs:m,evaluations:x,loading:g,error:b}}function d(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-500",children:[(0,r.jsx)(i.Z,{className:"w-10 h-10 animate-spin mb-4"}),(0,r.jsx)("p",{children:"Loading your portal..."})]})}function h(e){let{message:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center px-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-error-50 dark:bg-error-900/20 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 text-error-500"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Access Error"}),(0,r.jsx)("p",{className:"text-neutral-500 text-sm mt-1 max-w-xs mx-auto",children:t}),(0,r.jsx)("a",{href:"/parent",className:"mt-6 text-primary-600 font-bold hover:underline",children:"Back to Login"})]})}},13726:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(3827),a=n(87461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var l=n(26490),i=n(57976);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var o=n(69475),u=n(44715);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,a.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var h=n(66912),m=n(2335),f=n(87134),x=n(64090),p=n(75504);function g(){let{data:e,loading:t,error:n}=(0,h.Ej)(),{data:a,loading:g}=(0,m.wm)((null==e?void 0:e.id)||""),[y,b]=(0,x.useState)(null),v=(0,x.useMemo)(()=>a.filter(e=>"issued"===e.status||"overdue"===e.status).reduce((e,t)=>e+t.total,0),[a]),w=(0,x.useMemo)(()=>a.filter(e=>"paid"!==e.status),[a]),j=(0,x.useMemo)(()=>a.filter(e=>"paid"===e.status),[a]);if(t||g)return(0,r.jsx)(h.tu,{});if(n||!e)return(0,r.jsx)(h.tM,{message:n||"Could not load billing data."});let S=async e=>{b(e.id);try{let t={series:e.series,number:e.number,date:e.date,dueDate:e.dueDate,clinic:e.clinic,client:e.client,items:e.items,total:e.total,currency:e.currency,date:new Date(e.date).toLocaleDateString("ro-RO"),dueDate:new Date(e.dueDate).toLocaleDateString("ro-RO")},n=(0,f.q)(t),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="Invoice_".concat(e.series).concat(e.number,".pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(e){console.error("Download failed",e),alert("Failed to download invoice.")}finally{b(null)}};return(0,r.jsxs)("div",{className:"p-4 space-y-6 animate-in fade-in slide-in-from-right-4 duration-500 pb-20 font-sans",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Invoices & Payments"}),(0,r.jsx)("p",{className:"text-neutral-500 text-sm",children:"Manage your billing and view history"})]}),(0,r.jsxs)("div",{className:(0,p.W)("rounded-3xl border p-6 shadow-sm overflow-hidden relative",v>0?"bg-warning-50 border-warning-100 dark:bg-warning-900/10 dark:border-warning-900/30":"bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800"),children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,r.jsx)(s,{className:"w-24 h-24"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2 py-4",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest",children:"Current Balance"}),(0,r.jsxs)("h2",{className:"text-5xl font-black text-neutral-900 dark:text-white",children:[v.toFixed(2)," RON"]}),(0,r.jsx)("div",{className:(0,p.W)("flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider",v>0?"bg-warning-100 text-warning-700":"bg-success-50 text-success-700 dark:bg-success-900/20 dark:text-success-400"),children:v>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-3 h-3"})," Payment Pending"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"w-3 h-3"})," All Paid"]})})]}),v>0&&(0,r.jsxs)("button",{onClick:()=>alert("Online payments coming soon."),className:"w-full mt-6 py-4 bg-primary-600 hover:bg-primary-700 text-white rounded-2xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-primary-500/20",children:["Pay Balance Online",(0,r.jsx)(c,{className:"w-5 h-5"})]})]}),w.length>0&&(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-bold text-neutral-900 dark:text-white px-2",children:"Payment Required"}),(0,r.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-warning-50 dark:bg-warning-900/20 text-warning-600 flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:["Invoice #",e.series,"-",e.number]}),(0,r.jsxs)("p",{className:"text-xs text-neutral-500",children:["Issued: ",new Date(e.date).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"text-xs text-error-500 font-medium",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-4 w-full sm:w-auto border-t sm:border-0 border-neutral-100 dark:border-neutral-800 pt-3 sm:pt-0",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-black text-neutral-900 dark:text-white",children:[e.total.toFixed(2)," RON"]}),(0,r.jsx)("span",{className:"text-[10px] font-bold uppercase text-warning-600",children:"Unpaid"})]}),(0,r.jsx)("button",{onClick:()=>S(e),disabled:y===e.id,className:"p-3 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl text-neutral-600 dark:text-neutral-300 transition-colors",title:"Download PDF",children:y===e.id?(0,r.jsx)(l.Z,{className:"w-5 h-5 animate-spin"}):(0,r.jsx)(u.Z,{className:"w-5 h-5"})})]})]},e.id))})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-bold text-neutral-900 dark:text-white px-2 flex items-center gap-2",children:[(0,r.jsx)(d,{className:"w-4 h-4 text-neutral-400"}),"Paid History"]}),j.length>0?(0,r.jsx)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm overflow-hidden",children:(0,r.jsx)("div",{className:"divide-y divide-neutral-100 dark:divide-neutral-800",children:j.map(e=>(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-success-50 dark:bg-success-900/20 text-success-600 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:["#",e.series,"-",e.number]}),(0,r.jsx)("p",{className:"text-xs text-neutral-500",children:new Date(e.date).toLocaleDateString()})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("p",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:[e.total.toFixed(2)," RON"]}),(0,r.jsx)("button",{onClick:()=>S(e),className:"text-neutral-400 hover:text-primary-600 transition-colors",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]})]},e.id))})}):(0,r.jsxs)("div",{className:"text-center py-10 opacity-50",children:[(0,r.jsx)(s,{className:"w-12 h-12 mx-auto mb-2 text-neutral-300"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500",children:"No payment history available."})]})]}),(0,r.jsx)("p",{className:"text-[10px] text-neutral-400 text-center px-6 leading-relaxed",children:"Payments are synchronized within 24 hours. For urgent billing issues, please contact the clinic administration directly."})]})}},10207:function(e,t,n){"use strict";n.d(t,{Sp:function(){return d},gx:function(){return o},jT:function(){return u}});var r=n(3827),a=n(64090),s=n(27065),l=n(1221),i=n(58121);let c=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),[f,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,s.Aj)(l.I8,async e=>{if(null==e?void 0:e.isAnonymous){o(e);let t=localStorage.getItem("parent_client_id"),n=localStorage.getItem("parent_client_name"),r=localStorage.getItem("parent_uid");if(t){if(r!==e.uid){console.log("[ParentAuth] UID mismatch or new session. Re-registering with client...");try{let n=(0,i.JU)(l.db,"clients",t);await (0,i.r7)(n,{parentUids:(0,i.vr)(e.uid)}),console.log("[ParentAuth] Re-registered successfully."),localStorage.setItem("parent_uid",e.uid)}catch(e){console.error("[ParentAuth] Failed to re-register UID with client:",e)}}d(t),m(n)}else d(null),m(null);x(!1)}else if(localStorage.getItem("parent_client_code")&&!e){console.log("[ParentAuth] No active session, but found stored code. Auto-logging in...");try{await (0,s.XB)(l.I8);return}catch(e){console.error("[ParentAuth] Auto-login failed:",e),x(!1)}}else o(null),d(null),m(null),x(!1)});return()=>e()},[]);let p=(0,a.useCallback)(async(e,t,n)=>{try{let r=l.I8.currentUser;r&&r.isAnonymous||(r=(await (0,s.XB)(l.I8)).user);let a=(0,i.JU)(l.db,"clients",e);await (0,i.r7)(a,{parentUids:(0,i.vr)(r.uid)}),localStorage.setItem("parent_uid",r.uid),localStorage.setItem("parent_client_id",e),localStorage.setItem("parent_client_name",t),localStorage.setItem("parent_client_code",n.toUpperCase()),o(r),d(e),m(t),console.log("[ParentAuth] Successfully authenticated parent with UID:",r.uid)}catch(e){throw console.error("[ParentAuth] Error authenticating:",e),e}},[]),g=(0,a.useCallback)(async()=>{try{localStorage.removeItem("parent_uid"),localStorage.removeItem("parent_client_id"),localStorage.removeItem("parent_client_name"),localStorage.removeItem("parent_client_code"),await (0,s.w7)(l.I8),o(null),d(null),m(null)}catch(e){console.error("[ParentAuth] Error signing out:",e)}},[]);return(0,r.jsx)(c.Provider,{value:{user:n,clientId:u,clientName:h,loading:f,isAuthenticated:null!==n&&null!==u,authenticateWithCode:p,signOut:g},children:t})}function u(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useParentAuth must be used within ParentAuthProvider");return e}function d(){return(0,a.useContext)(c)}},2335:function(e,t,n){"use strict";n.d(t,{HX:function(){return x},Nx:function(){return m},Rn:function(){return f},Su:function(){return u},av:function(){return c},b$:function(){return d},bI:function(){return g},gV:function(){return y},hI:function(){return i},lU:function(){return o},we:function(){return h},wm:function(){return p}});var r=n(64090),a=n(58121),s=n(1221);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{c(!0);let n=(0,a.IO)((0,a.hJ)(s.db,e),...t),r=(0,a.cf)(n,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),c(!1)},t=>{console.error("Error fetching ".concat(e,":"),t),u(t.message),c(!1)});return()=>r()},[e]),{data:n,loading:i,error:o}}function i(){return l("events")}function c(){return l("clients")}function o(){return l("team_members")}function u(){return l("services")}function d(){return l("programs")}function h(e){let[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e){i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"events"),(0,a.ar)("clientId","==",e),(0,a.Xo)("startTime","asc")),r=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),n(t),i(!1)},e=>{console.error("Error fetching client events:",e),o(e.message),i(!1)});return()=>r()},[e]),{data:t,loading:l,error:c}}function m(e,t){let[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let n=new Date(e,t,1),r=new Date(e,t+1,0,23,59,59,999),i=(0,a.IO)((0,a.hJ)(s.db,"events"),(0,a.ar)("startTime",">=",n.toISOString()),(0,a.ar)("startTime","<=",r.toISOString()),(0,a.Xo)("startTime","asc")),o=(0,a.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),c(!1)},e=>{console.error("Error fetching events by month:",e),u(e.message),c(!1)});return()=>o()},[e,t]),{data:n,loading:i,error:o}}function f(e){let[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e){n([]),i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"clients",e,"interventionPlans"),(0,a.Xo)("createdAt","desc")),r=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),n(t),i(!1)},e=>{console.error("Error fetching intervention plans:",e),o(e.message),i(!1)});return()=>r()},[e]);let u=t.find(e=>"active"===e.status)||null;return{data:t,loading:l,error:c,activePlan:u,getActivePlanForDate:e=>t.find(t=>{if("active"!==t.status)return!1;let n=new Date(t.startDate),r=new Date(t.endDate);return r.setHours(23,59,59,999),e>=n&&e<=r})||null}}function x(){let[e,t]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=(0,a.cf)((0,a.JU)(s.db,"system_settings","config"),e=>{e.exists()?t(e.data()):t(null),l(!1)},e=>{console.error("Error fetching system settings:",e),c(e.message),l(!1)});return()=>e()},[]),{data:e,loading:n,error:i}}function p(e){let[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e){i(!1);return}let t=(0,a.IO)((0,a.hJ)(s.db,"invoices"),(0,a.ar)("clientId","==",e),(0,a.Xo)("date","desc")),r=(0,a.cf)(t,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),n(t),i(!1)},e=>{console.error("Error fetching client invoices:",e),o(e.message),i(!1)});return()=>r()},[e]),{data:t,loading:l,error:c}}function g(e,t){let[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let n="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-01"),r="".concat(e,"-").concat(String(t+1).padStart(2,"0"),"-31"),i=(0,a.IO)((0,a.hJ)(s.db,"invoices"),(0,a.ar)("date",">=",n),(0,a.ar)("date","<=",r),(0,a.Xo)("date","desc")),o=(0,a.cf)(i,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),c(!1)},e=>{console.error("Error fetching monthly invoices:",e),u(e.message),c(!1)});return()=>o()},[e,t]),{data:n,loading:i,error:o}}function y(e,t){let[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[o,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let n="".concat(e,"-").concat(String(t+1).padStart(2,"0")),r=(0,a.IO)((0,a.hJ)(s.db,"payouts"),(0,a.ar)("month","==",n)),i=(0,a.cf)(r,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),l(t),c(!1)},e=>{console.error("Error fetching monthly payouts:",e),u(e.message),c(!1)});return()=>i()},[e,t]),{data:n,loading:i,error:o}}},1221:function(e,t,n){"use strict";n.d(t,{Fw:function(){return h},I8:function(){return o},db:function(){return u},tO:function(){return d}});var r=n(26142),a=n(27065),s=n(58121),l=n(24905),i=n(76079);let c=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyBLyN1jo8PpJ5OMtkEuC4auhuuviapB3Bs",authDomain:"tempo-app-2.firebaseapp.com",projectId:"tempo-app-2",storageBucket:"tempo-app-2.firebasestorage.app",messagingSenderId:"47813899076",appId:"1:47813899076:web:cd597912a0755195241d11"}):(0,r.C6)()[0],o=(0,a.v0)(c),u=(0,s.ad)(c),d=(0,l.cF)(c),h=(0,i.KL)(c)},87134:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var r=n(92493),a=n(25264);let s=e=>{let t=new r.default;t.setFontSize(20),t.text("INVOICE",150,20),t.setFontSize(10),t.text("Series: ".concat(e.series),150,30),t.text("Number: ".concat(e.number),150,35),t.text("Date: ".concat(e.date),150,40),t.text("Due Date: ".concat(e.dueDate),150,45),t.setFontSize(12),t.setFont("helvetica","bold"),t.text(e.clinic.name,14,20),t.setFont("helvetica","normal"),t.setFontSize(10);let n=25;t.text(e.clinic.address,14,n+=5,{maxWidth:80}),n+=(t.splitTextToSize(e.clinic.address,80).length-1)*5,t.text("CUI: ".concat(e.clinic.cui),14,n+=5),t.text("Reg. Com: ".concat(e.clinic.regNo),14,n+=5),t.text("Bank: ".concat(e.clinic.bank),14,n+=5),t.text("IBAN: ".concat(e.clinic.iban),14,n+=5),t.text("Email: ".concat(e.clinic.email),14,n+=5),t.setFont("helvetica","bold"),t.text("Bill To:",150,60),t.setFont("helvetica","normal"),t.text(e.client.name,150,65),e.client.address&&t.text(e.client.address,150,70,{maxWidth:50});let s=Math.max(n+15,90);(0,a.default)(t,{startY:s,head:[["Description","Qty","Unit","Price","Amount"]],body:e.items.map(e=>[e.description,e.quantity,e.unit,e.price.toFixed(2),e.amount.toFixed(2)]),theme:"striped",headStyles:{fillColor:[74,144,226]},foot:[["","","","Total","".concat(e.total.toFixed(2)," ").concat(e.currency)]],footStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold"}});let l=t.lastAutoTable.finalY+20;return t.setFontSize(10),t.text("Thank you for your business!",14,l),t.setFontSize(8),t.text("This invoice was generated automatically by TempoApp.",14,280),t.output("blob")}},75504:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=function e(t){var n,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(n=0;n<s;n++)t[n]&&(r=e(t[n]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{W:function(){return r}})}},function(e){e.O(0,[4358,139,2505,3125,5050,7232,5264,2971,8069,1744],function(){return e(e.s=55351)}),_N_E=e.O()}]);