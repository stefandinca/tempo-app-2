(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8579],{84384:function(e,t,r){Promise.resolve().then(r.bind(r,92894))},98998:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},61524:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},18025:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},59496:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},95160:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]])},14562:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},97307:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},23441:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},37805:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},85159:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},26490:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},69475:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},95200:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},27271:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},56227:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},10775:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},66912:function(e,t,r){"use strict";r.d(t,{Ej:function(){return o},tM:function(){return u},tu:function(){return x}});var s=r(3827),a=r(64090),l=r(1221),n=r(58121),i=r(18994),d=r(98998),c=r(10207);function o(){let{isAuthenticated:e,clientId:t,loading:r}=(0,c.jT)(),[s,i]=(0,a.useState)(null),[d,o]=(0,a.useState)([]),[x,u]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[b,f]=(0,a.useState)(!0),[j,v]=(0,a.useState)(null);return(0,a.useEffect)(()=>{r&&f(!0)},[r]),(0,a.useEffect)(()=>{if(r)return;if(!e||!t){f(!1);return}f(!0),v(null);let s=(0,n.hJ)(l.db,"clients"),a=(0,n.IO)(s,(0,n.ar)("__name__","==",t)),d=null,c=null,x=null,m=null,h=(0,n.cf)(a,e=>{if(e.empty){v("Portal session invalid or expired."),f(!1);return}let r=e.docs[0];i({id:r.id,...r.data()}),d&&d();let s=(0,n.IO)((0,n.hJ)(l.db,"events"),(0,n.ar)("clientId","==",t),(0,n.Xo)("startTime","asc"));d=(0,n.cf)(s,e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),o(t)},e=>{console.error("Sessions fetch error:",e)}),c&&c(),c=(0,n.cf)((0,n.hJ)(l.db,"services"),e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),u(t)}),x&&x(),x=(0,n.cf)((0,n.hJ)(l.db,"programs"),e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),p(t)}),m&&m();let a=(0,n.IO)((0,n.hJ)(l.db,"clients",t,"evaluations"),(0,n.ar)("status","==","completed")),h=(0,n.IO)((0,n.hJ)(l.db,"clients",t,"vbmapp_evaluations"),(0,n.ar)("status","==","completed")),b=[],j=[],y=()=>{g([...b,...j].sort((e,t)=>{let r=new Date(e.completedAt||e.createdAt).getTime();return new Date(t.completedAt||t.createdAt).getTime()-r})),f(!1)};m=(0,n.cf)(a,e=>{b=e.docs.map(e=>({id:e.id,...e.data()})),y()}),(0,n.cf)(h,e=>{j=e.docs.map(e=>({id:e.id,...e.data()})),y()})},e=>{console.error("Client fetch error:",e),v(e.message),f(!1)});return()=>{h(),d&&d(),c&&c(),x&&x(),m&&m()}},[e,t,r]),{data:s,sessions:d,services:x,programs:m,evaluations:h,loading:b,error:j}}function x(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-500",children:[(0,s.jsx)(i.Z,{className:"w-10 h-10 animate-spin mb-4"}),(0,s.jsx)("p",{children:"Loading your portal..."})]})}function u(e){let{message:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center px-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-error-50 dark:bg-error-900/20 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(d.Z,{className:"w-8 h-8 text-error-500"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Access Error"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm mt-1 max-w-xs mx-auto",children:t}),(0,s.jsx)("a",{href:"/parent",className:"mt-6 text-primary-600 font-bold hover:underline",children:"Back to Login"})]})}},92894:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var s=r(3827),a=r(64090),l=r(87461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,l.Z)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);var i=r(69475),d=r(14562),c=r(95160),o=r(29733),x=r(59496),u=r(66912),m=r(10775),p=r(27271),h=r(85159),g=r(23441),b=r(97307),f=r(75504);let j=[{key:"minus",label:"−",color:"error",description:"Incorrect"},{key:"zero",label:"0",color:"neutral",description:"No Response"},{key:"prompted",label:"P",color:"warning",description:"Prompted"},{key:"plus",label:"+",color:"success",description:"Correct"}];function v(e){let t=e.minus+e.zero+e.prompted+e.plus;return 0===t?0:Math.round(e.plus/t*100)}function y(e){let{programId:t,programTitle:r,programDescription:l,sessionHistory:n}=e,[i,d]=(0,a.useState)(!1),c=[...n].sort((e,t)=>t.date.getTime()-e.date.getTime()),x=c[0],u=(null==x?void 0:x.scores)||{minus:0,zero:0,prompted:0,plus:0},y=n.reduce((e,t)=>({minus:e.minus+t.scores.minus,zero:e.zero+t.scores.zero,prompted:e.prompted+t.scores.prompted,plus:e.plus+t.scores.plus}),{minus:0,zero:0,prompted:0,plus:0}),w=y.minus+y.zero+y.prompted+y.plus,k=v(y);v(u);let N=function(e){if(e.length<2)return"insufficient";let t=e.slice(-3),r=e.slice(-6,-3);if(0===r.length)return"insufficient";let s=t.reduce((e,t)=>e+v(t.scores),0)/t.length-r.reduce((e,t)=>e+v(t.scores),0)/r.length;return s>5?"improving":s<-5?"declining":"stable"}(n),S=(e,t)=>{let r={error:{bg:"bg-error-50 dark:bg-error-900/20 border-error-200 dark:border-error-800",activeBg:"bg-error-500 border-error-600",text:"text-error-600 dark:text-error-400"},neutral:{bg:"bg-neutral-100 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700",activeBg:"bg-neutral-500 border-neutral-600",text:"text-neutral-600 dark:text-neutral-400"},warning:{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",activeBg:"bg-warning-500 border-warning-600",text:"text-warning-600 dark:text-warning-400"},success:{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",activeBg:"bg-success-500 border-success-600",text:"text-success-600 dark:text-success-400"}};return r[e]||r.neutral},Z=(()=>{switch(N){case"improving":return{icon:o.Z,label:"Improving",color:"text-success-600",bg:"bg-success-50 dark:bg-success-900/20"};case"declining":return{icon:m.Z,label:"Needs Focus",color:"text-warning-600",bg:"bg-warning-50 dark:bg-warning-900/20"};case"stable":return{icon:p.Z,label:"Stable",color:"text-primary-600",bg:"bg-primary-50 dark:bg-primary-900/20"};default:return null}})();return(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-neutral-100 dark:border-neutral-800",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-bold text-neutral-900 dark:text-white",children:r}),l&&(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5 line-clamp-2",children:l})]}),Z&&(0,s.jsxs)("div",{className:(0,f.W)("flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold",Z.bg,Z.color),children:[(0,s.jsx)(Z.icon,{className:"w-3.5 h-3.5"}),Z.label]})]})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-3",children:"Latest Session Scores"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-3",children:j.map(e=>{let{key:t,label:r,color:a,description:l}=e,n=u[t],i=S(a,n);return(0,s.jsxs)("div",{className:(0,f.W)("h-14 rounded-xl border-2 flex flex-col items-center justify-center select-none",n>0?i.activeBg+" text-white":i.bg+" "+i.text),title:l,children:[(0,s.jsx)("span",{className:"text-lg font-bold leading-none",children:r}),(0,s.jsx)("span",{className:"text-xs font-medium mt-0.5 opacity-80",children:n})]},t)})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-neutral-500",children:["Sessions: ",(0,s.jsx)("span",{className:"font-bold text-neutral-700 dark:text-neutral-300",children:n.length})]}),(0,s.jsxs)("span",{className:"text-neutral-500",children:["Total Trials: ",(0,s.jsx)("span",{className:"font-bold text-neutral-700 dark:text-neutral-300",children:w})]})]}),(0,s.jsxs)("span",{className:"text-neutral-500",children:["Overall: ",(0,s.jsxs)("span",{className:(0,f.W)("font-bold",k>=80?"text-success-600":k>=50?"text-warning-600":w>0?"text-error-600":"text-neutral-400"),children:[k,"%"]})]})]}),w>0&&(0,s.jsx)("div",{className:"mt-2 h-2 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:(0,f.W)("h-full transition-all duration-300 rounded-full",k>=80?"bg-success-500":k>=50?"bg-warning-500":"bg-error-500"),style:{width:"".concat(k,"%")}})})]}),n.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>d(!i),className:"w-full px-4 py-3 flex items-center justify-between border-t border-neutral-100 dark:border-neutral-800 hover:bg-neutral-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,s.jsxs)("span",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:["Session History (",n.length,")"]}),i?(0,s.jsx)(h.Z,{className:"w-4 h-4 text-neutral-400"}):(0,s.jsx)(g.Z,{className:"w-4 h-4 text-neutral-400"})]}),i&&(0,s.jsx)("div",{className:"px-4 pb-4 space-y-2 animate-in slide-in-from-top-2 duration-200",children:c.map((e,t)=>{let r=v(e.scores),a=e.scores.minus+e.scores.zero+e.scores.prompted+e.scores.plus;return(0,s.jsxs)("div",{className:(0,f.W)("flex items-center justify-between py-2 px-3 rounded-lg border",0===t?"bg-primary-50/50 dark:bg-primary-900/10 border-primary-100 dark:border-primary-900/30":"bg-neutral-50 dark:bg-neutral-800/50 border-neutral-100 dark:border-neutral-800"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-neutral-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:e.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.date.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-500",children:e.sessionType})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("span",{className:"text-[10px] font-bold text-error-500",children:["−",e.scores.minus]}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-neutral-400",children:["0:",e.scores.zero]}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-warning-500",children:["P",e.scores.prompted]}),(0,s.jsxs)("span",{className:"text-[10px] font-bold text-success-500",children:["+",e.scores.plus]})]}),(0,s.jsxs)("div",{className:(0,f.W)("px-2 py-0.5 rounded-full text-[10px] font-bold",r>=80?"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400":r>=50?"bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-400":a>0?"bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-400":"bg-neutral-100 text-neutral-500"),children:[r,"%"]})]})]},e.sessionId)})})]})]})}var w=r(37805),k=r(50171);function N(e){let{evaluations:t,onSelect:r}=e;return 0===t.length?(0,s.jsxs)("div",{className:"py-20 text-center bg-white dark:bg-neutral-900 rounded-3xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-neutral-50 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.Z,{className:"w-8 h-8 text-neutral-300"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"No evaluations yet"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm mt-1 max-w-xs mx-auto",children:"Completed evaluations will appear here."})]}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t="ABLLS"===e.type,a=t?e.overallPercentage:e.overallMilestonePercentage;return(0,s.jsx)("button",{onClick:()=>r(e),className:"w-full text-left bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm hover:shadow-md transition-all group",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 flex-shrink-0 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl overflow-hidden flex items-center justify-center",children:t?(0,s.jsx)(k.E,{evaluation:e,className:"w-full h-full"}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"block text-2xl font-bold text-primary-600",children:e.overallMilestoneScore}),(0,s.jsx)("span",{className:"text-[10px] text-neutral-500 uppercase",children:"Points"})]})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:(0,f.W)("px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded",t?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"),children:e.type}),(0,s.jsx)("span",{className:"text-xs text-neutral-500",children:new Date(e.completedAt||e.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]}),(0,s.jsx)("h3",{className:"font-bold text-neutral-900 dark:text-white truncate",children:t?"Skills Assessment":"Milestones Assessment"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1",children:[(0,s.jsxs)("p",{className:"text-sm text-neutral-500",children:["Score: ",(0,s.jsxs)("span",{className:"font-bold text-neutral-900 dark:text-white",children:[a,"%"]})]}),t?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-success-500"}),(0,s.jsxs)("span",{className:"text-xs text-neutral-500",children:[Object.values(e.categorySummaries).filter(e=>e.percentage>=80).length," Mastered"]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-warning-500"}),(0,s.jsxs)("span",{className:"text-xs text-neutral-500",children:[e.barrierSummary.severeBarriers.length," Barriers"]})]})]})]}),(0,s.jsx)("div",{className:"text-neutral-300 group-hover:text-primary-500 transition-colors",children:(0,s.jsx)(w.Z,{className:"w-5 h-5"})})]})},e.id)})})}var S=r(53879);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Z=(0,l.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var _=r(26490),M=r(61524),I=r(56227),A=r(18025),P=r(95200),C=r(20168),E=r(3224),T=r(89006),L=r(60141),z=r(48170);function B(e){let{evaluation:t,previousEvaluation:r,allEvaluations:l,clientData:n,onBack:i}=e,d="ABLLS"===t.type,u=d?t:null,m=d&&r?r:null,p=(0,a.useMemo)(()=>u?Object.values(u.categorySummaries).sort((e,t)=>e.categoryKey.localeCompare(t.categoryKey)):[],[u]),h=(0,a.useMemo)(()=>u?[...p].sort((e,t)=>t.percentage-e.percentage).slice(0,3):[],[p,u]),g=(0,a.useMemo)(()=>u&&m?p.map(e=>{let t=m.categorySummaries[e.categoryKey],r=t?e.percentage-t.percentage:0;return{...e,diff:r}}).filter(e=>e.diff>0).sort((e,t)=>t.diff-e.diff).slice(0,3):[],[p,m,u]),j=(0,a.useMemo)(()=>u?(0,C.kE)(u.categorySummaries):[],[u]),v=(0,a.useMemo)(()=>u?(0,C.Qc)(u.categorySummaries):{},[u]),y=d?null:t,w=n.birthDate?(0,L.Fw)(n.birthDate):null,N=(0,a.useMemo)(()=>w&&y?(0,L.Sy)(w.totalMonths,(0,L.QI)(y.overallMilestoneScore)):null,[w,y]),B=(0,a.useMemo)(()=>y?(0,L.JW)(y.dominantLevel):"",[y]),D=(0,a.useMemo)(()=>d&&u?(0,C.tk)(u.overallPercentage):y&&N?(0,C.c9)(N.delayPercentage,N.severityLabel,y.dominantLevel):null,[d,u,y,N]),W=(0,a.useMemo)(()=>d&&u?(0,z.Ep)(u,n.name||"Child",T.s7):y?(0,z.pH)(y,n.name||"Child",E.W3):[],[d,u,y,n.name]);return(0,s.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:i,className:"p-2 -ml-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 transition-colors",children:(0,s.jsx)(S.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:d?"ABLLS Report":"VB-MAPP Report"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[(0,s.jsx)(b.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:new Date(t.completedAt||t.createdAt).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:(0,s.jsxs)("button",{onClick:()=>{let e="/reports/evaluation/?type=".concat(d?"ablls":"vbmapp","&id=").concat(t.id,"&clientId=").concat(n.id,"&mode=parent");window.open(e,"_blank")},className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-primary-600 text-white hover:bg-primary-700 transition-all text-sm font-bold shadow-lg shadow-primary-600/20",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"View Full Report"]})})]}),(0,s.jsx)("div",{className:(0,f.W)("rounded-3xl p-6 text-white shadow-lg",d?"bg-gradient-to-br from-primary-500 to-primary-700 shadow-primary-500/20":"bg-gradient-to-br from-indigo-500 to-purple-700 shadow-indigo-500/20"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"opacity-80 text-sm font-medium mb-1",children:"Overall Progress"}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsxs)("h3",{className:"text-4xl font-bold",children:[d?null==u?void 0:u.overallPercentage:null==y?void 0:y.overallMilestonePercentage,"%"]}),r&&(0,s.jsxs)("span",{className:"opacity-90 text-sm font-medium flex items-center gap-1",children:[(0,s.jsx)(o.Z,{className:"w-3 h-3"}),d?(0,s.jsxs)(s.Fragment,{children:[u.overallPercentage>r.overallPercentage?"+":"",u.overallPercentage-r.overallPercentage,"%"]}):(0,s.jsxs)(s.Fragment,{children:[y.overallMilestonePercentage>r.overallMilestonePercentage?"+":"",y.overallMilestonePercentage-r.overallMilestonePercentage,"%"]})]})]}),(0,s.jsx)("p",{className:"opacity-80 text-sm mt-1",children:d?"".concat(null==u?void 0:u.overallScore," / ").concat(null==u?void 0:u.overallMaxScore," points"):"Level ".concat(null==y?void 0:y.dominantLevel," | ").concat(null==y?void 0:y.overallMilestoneScore," points")})]}),(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:(0,s.jsx)(x.Z,{className:"w-8 h-8 text-white"})})]})}),D&&(0,s.jsx)("section",{className:(0,f.W)("p-5 rounded-3xl border shadow-sm","excellent"===D.level?"bg-success-50 border-success-100 dark:bg-success-900/10 dark:border-success-900/30":"good"===D.level?"bg-blue-50 border-blue-100 dark:bg-blue-900/10 dark:border-blue-900/30":"moderate"===D.level?"bg-warning-50 border-warning-100 dark:bg-warning-900/10 dark:border-warning-900/30":"bg-error-50 border-error-100 dark:bg-error-900/10 dark:border-error-900/30"),children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:(0,f.W)("w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0","excellent"===D.level?"bg-success-100 text-success-600":"good"===D.level?"bg-blue-100 text-blue-600":"moderate"===D.level?"bg-warning-100 text-warning-600":"bg-error-100 text-error-600"),children:(0,s.jsx)(Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-neutral-900 dark:text-white text-lg",children:D.title}),(0,s.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 text-sm mt-1 leading-relaxed",children:D.description}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-white/50 dark:bg-black/20 rounded-xl border border-white/50 dark:border-white/5",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider mb-1",children:"Therapeutic Focus"}),(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-800 dark:text-neutral-200",children:D.recommendation})]})]})]})}),!d&&w&&N&&(0,s.jsxs)("section",{className:"bg-white dark:bg-neutral-900 rounded-3xl p-5 border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white mb-4 px-1 flex items-center gap-2",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 text-primary-500"}),"Developmental Analysis"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-2xl",children:[(0,s.jsx)("p",{className:"text-xs text-neutral-500 font-bold uppercase tracking-wider mb-1",children:"Chronological Age"}),(0,s.jsx)("p",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:(0,L.KD)(w)})]}),(0,s.jsxs)("div",{className:"p-4 bg-primary-50 dark:bg-primary-900/20 rounded-2xl border border-primary-100 dark:border-primary-800/30",children:[(0,s.jsx)("p",{className:"text-xs text-primary-600 dark:text-primary-400 font-bold uppercase tracking-wider mb-1",children:"Estimated Dev. Age"}),(0,s.jsx)("p",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:B})]})]}),N.delayMonths>0&&(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-3 p-3 bg-warning-50 dark:bg-warning-900/10 rounded-xl border border-warning-100 dark:border-warning-900/30",children:[(0,s.jsx)(M.Z,{className:"w-5 h-5 text-warning-500 flex-shrink-0"}),(0,s.jsxs)("p",{className:"text-sm text-warning-800 dark:text-warning-300",children:["Current assessment shows a developmental gap of ",(0,s.jsxs)("strong",{children:[N.delayMonths," months"]})," compared to same-age peers."]})]})]}),d&&u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-3xl p-4 border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white mb-4 px-2",children:"Skill Profile"}),(0,s.jsx)(k.Z,{evaluation:u,previousEvaluation:m,size:"sm",showLegend:!1})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white px-1",children:"Learning Domains"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(v).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-bold text-neutral-800 dark:text-neutral-200 text-sm",children:t}),(0,s.jsxs)("span",{className:(0,f.W)("text-xs font-bold",r.percentage>=80?"text-success-600":r.percentage>=50?"text-primary-600":"text-neutral-500"),children:[r.percentage,"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:(0,f.W)("h-full rounded-full transition-all",r.percentage>=80?"bg-success-500":r.percentage>=50?"bg-primary-500":"bg-neutral-400"),style:{width:"".concat(r.percentage,"%")}})})]},t)})})]}),j.length>0&&(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white px-1 flex items-center gap-2",children:[(0,s.jsx)(I.Z,{className:"w-4 h-4 text-warning-500"}),"Priority Skill Building"]}),(0,s.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/10 rounded-3xl border border-amber-100 dark:border-amber-900/30 p-4",children:[(0,s.jsx)("p",{className:"text-xs text-amber-700 dark:text-amber-400 mb-4 leading-relaxed",children:"Therapists have identified these areas as the most impactful for immediate focus:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,s.jsxs)("div",{className:"px-3 py-2 bg-white dark:bg-neutral-800 rounded-xl shadow-sm border border-amber-200 dark:border-amber-800 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-6 h-6 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center font-bold text-amber-700 dark:text-amber-400 text-[10px]",children:e.key}),(0,s.jsx)("span",{className:"text-xs font-medium text-neutral-800 dark:text-neutral-200",children:(0,C.US)(e.key,e.name)})]},e.key))})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white px-1",children:g.length>0?"Top Improvements":"Strongest Areas"}),(0,s.jsx)("div",{className:"grid gap-3",children:(g.length>0?g:h).map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm flex items-center gap-4",children:[(0,s.jsx)("div",{className:(0,f.W)("w-10 h-10 rounded-xl flex items-center justify-center font-bold",g.length>0?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"bg-success-100 dark:bg-success-900/30 text-success-700 dark:text-success-400"),children:e.categoryKey}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-bold text-neutral-900 dark:text-white",children:(0,C.US)(e.categoryKey,e.categoryName)}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("div",{className:"flex-1 h-1.5 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:(0,f.W)("h-full rounded-full",g.length>0?"bg-primary-500":"bg-success-500"),style:{width:"".concat(e.percentage,"%")}})}),(0,s.jsx)("span",{className:"text-xs font-bold text-neutral-600 dark:text-neutral-400",children:g.length>0?"+".concat(e.diff,"%"):"".concat(e.percentage,"%")})]})]})]},e.categoryKey))})]})]}),!d&&y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white px-1",children:"Learning Stages"}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(y.levelSummaries).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"font-bold text-neutral-900 dark:text-white",children:r.levelName.replace("Nivel","Stage")}),(0,s.jsxs)("span",{className:(0,f.W)("text-xs font-bold px-2 py-0.5 rounded",r.percentage>=80?"bg-success-100 text-success-700":r.percentage>=50?"bg-warning-100 text-warning-700":"bg-neutral-100 text-neutral-500"),children:[r.percentage,"% Mastered"]})]}),(0,s.jsx)("div",{className:"h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:(0,f.W)("h-full rounded-full transition-all",r.percentage>=80?"bg-success-500":r.percentage>=50?"bg-warning-500":"bg-neutral-400"),style:{width:"".concat(r.percentage,"%")}})})]},t)})})]}),y.barrierSummary.severeBarriers.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white px-1 flex items-center gap-2",children:[(0,s.jsx)(M.Z,{className:"w-4 h-4 text-warning-500"}),"Areas Needing Support"]}),(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm overflow-hidden",children:y.barrierSummary.severeBarriers.map((e,t)=>{let r=E.ek.find(t=>t.id===e);return(0,s.jsx)("div",{className:(0,f.W)("p-4",0!==t&&"border-t border-neutral-100 dark:border-neutral-800"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-warning-100 dark:bg-warning-900/30 flex items-center justify-center font-bold text-warning-700 dark:text-warning-400 text-sm flex-shrink-0",children:"!"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-neutral-900 dark:text-white text-sm",children:r?r.text.split("(")[0]:e}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1 italic leading-relaxed",children:(0,C.I6)(e)})]})]})},e)})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-5 rounded-3xl border border-neutral-200 dark:border-neutral-800 shadow-sm flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600",children:(0,s.jsx)(A.Z,{className:"w-7 h-7"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-neutral-500 uppercase font-bold tracking-wider mb-0.5",children:"Integration Readiness"}),(0,s.jsx)("p",{className:"font-bold text-neutral-900 dark:text-white text-xl",children:y.transitionSummary.readinessLevel.replace("_"," ").toUpperCase()}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["Ready for ","ready"===y.transitionSummary.readinessLevel?"mainstream settings":"targeted integration"]})]})]})]}),W.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-neutral-900 dark:text-white flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 text-primary-500"}),"Focus Goals for Next Period"]}),(0,s.jsxs)("span",{className:"text-[10px] font-bold bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full uppercase",children:[W.length," Identified"]})]}),(0,s.jsx)("div",{className:"grid gap-3",children:W.slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary-500"}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-1 w-5 h-5 rounded-full bg-primary-50 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 text-[10px] font-bold",children:t+1}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-neutral-800 dark:text-neutral-200",children:e.skillArea}),(0,s.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1 leading-relaxed",children:e.goalText})]})]})]},t))}),W.length>5&&(0,s.jsxs)("p",{className:"text-center text-xs text-neutral-500 italic py-2",children:["+ ",W.length-5," more goals identified in the clinical report"]})]}),(0,s.jsxs)("section",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-2xl p-4 border border-neutral-100 dark:border-neutral-800",children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider mb-2",children:"About this report"}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 leading-relaxed",children:["This progress report is generated based on the clinical assessment conducted by ",t.evaluatorName,". It provides a parent-friendly overview of skill development and learning milestones. For a full clinical analysis, please download the PDF version using the button at the top."]})]})]})}var D=r(12535);function W(){let{t:e}=(0,D.$G)(),{data:t,sessions:r,programs:l,evaluations:m,loading:p,error:h}=(0,u.Ej)(),[g,b]=(0,a.useState)("programs"),[j,v]=(0,a.useState)(null),w=(0,a.useMemo)(()=>j&&j.previousEvaluationId&&m&&m.find(e=>e.id===j.previousEvaluationId)||null,[j,m]),k=(0,a.useMemo)(()=>{if(!r||!l)return[];let e=new Map,t=e=>new Date(e?e.seconds?1e3*e.seconds:e:0);return r.forEach(r=>{let s=r.programIds||[],a=r.programScores||{},n=t(r.startTime);s.forEach(t=>{let s=a[t];if(!s||!(s.minus>0||s.zero>0||s.prompted>0||s.plus>0))return;let i=l.find(e=>e.id===t);i&&(e.has(t)||e.set(t,{id:t,title:i.title||"Unnamed Program",description:i.description,sessionHistory:[]}),e.get(t).sessionHistory.push({sessionId:r.id,date:n,scores:s,sessionType:r.type||"Therapy Session"}))})}),Array.from(e.values()).map(e=>({...e,sessionHistory:e.sessionHistory.sort((e,t)=>e.date.getTime()-t.date.getTime())})).filter(e=>e.sessionHistory.length>0)},[r,l]),S=(0,a.useMemo)(()=>{if(0===k.length)return{totalPrograms:0,totalSessions:0,totalTrials:0,avgSuccessRate:0};let e=0,t=0,r=new Set;return k.forEach(s=>{s.sessionHistory.forEach(s=>{r.add(s.sessionId);let a=s.scores.minus+s.scores.zero+s.scores.prompted+s.scores.plus;e+=a,t+=s.scores.plus})}),{totalPrograms:k.length,totalSessions:r.size,totalTrials:e,avgSuccessRate:e>0?Math.round(t/e*100):0}},[k]);return p?(0,s.jsx)(u.tu,{}):h||!t?(0,s.jsx)(u.tM,{message:h||"Could not load progress data."}):j?(0,s.jsx)("div",{className:"p-4 pb-24",children:(0,s.jsx)(B,{evaluation:j,previousEvaluation:w,allEvaluations:m,clientData:t,onBack:()=>v(null)})}):(0,s.jsxs)("div",{className:"p-4 space-y-6 animate-in fade-in slide-in-from-right-4 duration-500 pb-24",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:e("parent_portal.progress.title")}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm",children:e("parent_portal.progress.subtitle",{name:t.name})})]}),(0,s.jsxs)("div",{className:"flex p-1 bg-neutral-100 dark:bg-neutral-900 rounded-xl",children:[(0,s.jsxs)("button",{onClick:()=>b("programs"),className:(0,f.W)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2","programs"===g?"bg-white dark:bg-neutral-800 text-primary-600 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:[(0,s.jsx)(n,{className:"w-4 h-4"}),e("parent_portal.progress.tabs.programs")]}),(0,s.jsxs)("button",{onClick:()=>b("evaluations"),className:(0,f.W)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2","evaluations"===g?"bg-white dark:bg-neutral-800 text-primary-600 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),e("parent_portal.progress.tabs.evaluations")]})]}),"programs"===g?(0,s.jsxs)(s.Fragment,{children:[k.length>0?(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-xl flex items-center justify-center",children:(0,s.jsx)(d.Z,{className:"w-5 h-5 text-primary-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:S.totalPrograms}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-500 uppercase font-semibold tracking-wider",children:e("parent_portal.progress.stats.programs")})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-teal-100 dark:bg-teal-900/30 rounded-xl flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-teal-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:S.totalSessions}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-500 uppercase font-semibold tracking-wider",children:e("parent_portal.progress.stats.sessions")})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-5 h-5 text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:S.totalTrials}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-500 uppercase font-semibold tracking-wider",children:e("parent_portal.progress.stats.trials")})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-neutral-900 p-4 rounded-2xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,f.W)("w-10 h-10 rounded-xl flex items-center justify-center",S.avgSuccessRate>=80?"bg-success-100 dark:bg-success-900/30":S.avgSuccessRate>=50?"bg-warning-100 dark:bg-warning-900/30":"bg-error-100 dark:bg-error-900/30"),children:(0,s.jsx)(x.Z,{className:(0,f.W)("w-5 h-5",S.avgSuccessRate>=80?"text-success-600":S.avgSuccessRate>=50?"text-warning-600":"text-error-600")})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:[S.avgSuccessRate,"%"]}),(0,s.jsx)("p",{className:"text-[10px] text-neutral-500 uppercase font-semibold tracking-wider",children:e("parent_portal.progress.stats.success")})]})]})})]}):(0,s.jsxs)("div",{className:"py-20 text-center bg-white dark:bg-neutral-900 rounded-3xl border border-neutral-200 dark:border-neutral-800 shadow-sm",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-neutral-50 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(c.Z,{className:"w-8 h-8 text-neutral-300"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:e("parent_portal.progress.no_data")}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm mt-1 max-w-xs mx-auto",children:e("parent_portal.progress.no_data_subtitle")})]}),k.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-xs font-bold text-neutral-400 uppercase tracking-widest px-1 mb-4",children:e("parent_portal.progress.program_progress")}),(0,s.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,s.jsx)(y,{programId:e.id,programTitle:e.title,programDescription:e.description,sessionHistory:e.sessionHistory},e.id))})]}),(0,s.jsxs)("section",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-2xl p-4 border border-neutral-100 dark:border-neutral-800",children:[(0,s.jsx)("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:e("parent_portal.progress.understanding_scores")}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded bg-error-500 flex items-center justify-center text-white font-bold text-[10px]",children:"−"}),(0,s.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:e("parent_portal.progress.score_labels.incorrect")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded bg-neutral-500 flex items-center justify-center text-white font-bold text-[10px]",children:"0"}),(0,s.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:e("parent_portal.progress.score_labels.no_response")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded bg-warning-500 flex items-center justify-center text-white font-bold text-[10px]",children:"P"}),(0,s.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:e("parent_portal.progress.score_labels.prompted")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded bg-success-500 flex items-center justify-center text-white font-bold text-[10px]",children:"+"}),(0,s.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:e("parent_portal.progress.score_labels.correct")})]})]})]})]}):(0,s.jsx)(N,{evaluations:m||[],onSelect:v})]})}},10207:function(e,t,r){"use strict";r.d(t,{Sp:function(){return x},gx:function(){return c},jT:function(){return o}});var s=r(3827),a=r(64090),l=r(27065),n=r(1221),i=r(58121);let d=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[o,x]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,l.Aj)(n.I8,async e=>{if(null==e?void 0:e.isAnonymous){c(e);let t=localStorage.getItem("parent_client_id"),r=localStorage.getItem("parent_client_name"),s=localStorage.getItem("parent_uid");if(t){if(s!==e.uid){console.log("[ParentAuth] UID mismatch or new session. Re-registering with client...");try{let r=(0,i.JU)(n.db,"clients",t);await (0,i.r7)(r,{parentUids:(0,i.vr)(e.uid)}),console.log("[ParentAuth] Re-registered successfully."),localStorage.setItem("parent_uid",e.uid)}catch(e){console.error("[ParentAuth] Failed to re-register UID with client:",e)}}x(t),m(r)}else x(null),m(null);h(!1)}else if(localStorage.getItem("parent_client_code")&&!e){console.log("[ParentAuth] No active session, but found stored code. Auto-logging in...");try{await (0,l.XB)(n.I8);return}catch(e){console.error("[ParentAuth] Auto-login failed:",e),h(!1)}}else c(null),x(null),m(null),h(!1)});return()=>e()},[]);let g=(0,a.useCallback)(async(e,t,r)=>{try{let s=n.I8.currentUser;s&&s.isAnonymous||(s=(await (0,l.XB)(n.I8)).user);let a=(0,i.JU)(n.db,"clients",e);await (0,i.r7)(a,{parentUids:(0,i.vr)(s.uid)}),localStorage.setItem("parent_uid",s.uid),localStorage.setItem("parent_client_id",e),localStorage.setItem("parent_client_name",t),localStorage.setItem("parent_client_code",r.toUpperCase()),c(s),x(e),m(t),console.log("[ParentAuth] Successfully authenticated parent with UID:",s.uid)}catch(e){throw console.error("[ParentAuth] Error authenticating:",e),e}},[]),b=(0,a.useCallback)(async()=>{try{localStorage.removeItem("parent_uid"),localStorage.removeItem("parent_client_id"),localStorage.removeItem("parent_client_name"),localStorage.removeItem("parent_client_code"),await (0,l.w7)(n.I8),c(null),x(null),m(null)}catch(e){console.error("[ParentAuth] Error signing out:",e)}},[]);return(0,s.jsx)(d.Provider,{value:{user:r,clientId:o,clientName:u,loading:p,isAuthenticated:null!==r&&null!==o,authenticateWithCode:g,signOut:b},children:t})}function o(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useParentAuth must be used within ParentAuthProvider");return e}function x(){return(0,a.useContext)(d)}},1221:function(e,t,r){"use strict";r.d(t,{Fw:function(){return u},I8:function(){return c},db:function(){return o},tO:function(){return x}});var s=r(26142),a=r(27065),l=r(58121),n=r(24905),i=r(76079);let d=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyBLyN1jo8PpJ5OMtkEuC4auhuuviapB3Bs",authDomain:"tempo-app-2.firebaseapp.com",projectId:"tempo-app-2",storageBucket:"tempo-app-2.firebasestorage.app",messagingSenderId:"47813899076",appId:"1:47813899076:web:cd597912a0755195241d11"}):(0,s.C6)()[0],c=(0,a.v0)(d),o=(0,l.ad)(d),x=(0,n.cF)(d),u=(0,i.KL)(d)}},function(e){e.O(0,[4358,139,5050,8234,223,3676,9769,2971,8069,1744],function(){return e(e.s=84384)}),_N_E=e.O()}]);